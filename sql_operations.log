2025-04-30 19:23:07,141 WARNING:  * Debugger is active!
2025-04-30 19:23:07,147 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:23:07,858 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:23:07,859 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:23:12,624 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:23:25,897 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:25] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:23:28,961 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:28] "GET /cart HTTP/1.1" 200 -
2025-04-30 19:23:29,048 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-04-30 19:23:29,153 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 19:23:29,154 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 19:23:29,157 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 19:23:29,166 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 19:23:29,181 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /static/js/cart.js HTTP/1.1" 200 -
2025-04-30 19:23:29,182 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 19:23:29,335 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 19:23:29,362 INFO: Service worker requested
2025-04-30 19:23:29,373 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /service-worker.js?v=1746030209338 HTTP/1.1" 200 -
2025-04-30 19:23:29,377 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-04-30 19:23:29,380 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:23:29,382 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:23:29,382 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:23:29,441 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:29] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:23:30,115 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /cart HTTP/1.1" 200 -
2025-04-30 19:23:30,139 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-04-30 19:23:30,391 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 19:23:30,401 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 19:23:30,403 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 19:23:30,407 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 19:23:30,414 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /static/js/cart.js HTTP/1.1" 200 -
2025-04-30 19:23:30,418 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 19:23:30,671 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 19:23:30,709 INFO: Service worker requested
2025-04-30 19:23:30,711 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /service-worker.js?v=1746030210672 HTTP/1.1" 200 -
2025-04-30 19:23:30,726 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:23:30,727 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:23:30,736 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:23:30,768 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:30] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:23:33,149 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:33] "GET /checkout?_t=1746030211820 HTTP/1.1" 200 -
2025-04-30 19:23:33,251 INFO: Service worker requested
2025-04-30 19:23:33,253 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:33] "GET /service-worker.js?v=1746030213248 HTTP/1.1" 200 -
2025-04-30 19:23:33,281 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:33] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:23:33,285 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:33] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:23:33,306 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:33] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:23:33,313 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:33] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:23:41,114 WARNING: SQLAlchemy error when creating order, falling back to direct SQL: (sqlite3.OperationalError) table order has no column named reference_number
[SQL: INSERT INTO "order" (reference_number, customer_id, order_date, total_amount, status, customer_name, customer_phone, customer_email, customer_address, order_type, created_by_id, updated_at, completed_at, viewed, viewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, None, '2025-04-30 16:23:41.114320', 3000.0, 'pending', 'admin', '+256782068131', 'admin@example.com', "Zebra building, 29 Nasser Road, Kampala, Uganda\r\nPrinters' Arcade, 29 Nasser Road, Kampala, Uganda", 'online', None, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:23:41,129 ERROR: Error in get_order_by_id: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".id = ?]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:23:41,132 WARNING: Created order 1 with direct SQL but can't access it
2025-04-30 19:23:41,133 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:41] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:23:41,163 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:41] "GET /cart HTTP/1.1" 200 -
2025-04-30 19:23:41,309 INFO: Service worker requested
2025-04-30 19:23:41,319 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:41] "GET /service-worker.js?v=1746030221278 HTTP/1.1" 200 -
2025-04-30 19:23:41,326 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:23:41,328 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:41] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:23:41,382 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:23:41,408 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:41] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:23:51,296 INFO: 127.0.0.1 - - [30/Apr/2025 19:23:51] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:24:01,294 INFO: 127.0.0.1 - - [30/Apr/2025 19:24:01] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:24:11,621 INFO: 127.0.0.1 - - [30/Apr/2025 19:24:11] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:24:21,605 INFO: 127.0.0.1 - - [30/Apr/2025 19:24:21] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:24:31,617 INFO: 127.0.0.1 - - [30/Apr/2025 19:24:31] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:24:39,968 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\sql_operations.py', reloading
2025-04-30 19:24:41,599 WARNING:  * Debugger is active!
2025-04-30 19:24:41,605 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:24:42,201 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:24:42,202 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:24:42,377 INFO: 127.0.0.1 - - [30/Apr/2025 19:24:42] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:24:51,622 INFO: 127.0.0.1 - - [30/Apr/2025 19:24:51] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:25:00,717 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\direct_sql_app.py', reloading
2025-04-30 19:25:02,266 WARNING:  * Debugger is active!
2025-04-30 19:25:02,272 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:25:02,880 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:25:02,881 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:25:02,900 INFO: 127.0.0.1 - - [30/Apr/2025 19:25:02] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:25:12,637 INFO: 127.0.0.1 - - [30/Apr/2025 19:25:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:25:58,877 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 19:26:01,245 WARNING:  * Debugger is active!
2025-04-30 19:26:01,254 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:26:02,018 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:26:02,018 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:26:12,677 INFO: 127.0.0.1 - - [30/Apr/2025 19:26:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:26:40,140 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\fix_order_retrieval.py', reloading
2025-04-30 19:26:41,797 WARNING:  * Debugger is active!
2025-04-30 19:26:41,802 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:26:42,396 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:26:42,396 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:26:57,360 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 19:26:59,435 WARNING:  * Debugger is active!
2025-04-30 19:26:59,440 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:27:00,053 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:27:00,053 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:27:12,631 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:27:19,866 INFO:  * Restarting with stat
2025-04-30 19:27:21,161 WARNING:  * Debugger is active!
2025-04-30 19:27:21,166 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:27:21,783 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:27:21,783 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:27:31,061 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:31] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:27:33,271 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /cart HTTP/1.1" 200 -
2025-04-30 19:27:33,354 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-04-30 19:27:33,497 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 19:27:33,499 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 19:27:33,504 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 19:27:33,514 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 19:27:33,527 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /static/js/cart.js HTTP/1.1" 200 -
2025-04-30 19:27:33,540 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 19:27:33,876 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 19:27:33,909 INFO: Service worker requested
2025-04-30 19:27:33,919 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /service-worker.js?v=1746030453874 HTTP/1.1" 200 -
2025-04-30 19:27:33,925 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:33,949 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:27:33,972 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:33,979 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:33] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-04-30 19:27:34,010 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:34] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:27:38,880 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:38] "[32mGET /logout?_t=1746030455177 HTTP/1.1[0m" 302 -
2025-04-30 19:27:38,903 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:38] "GET / HTTP/1.1" 200 -
2025-04-30 19:27:38,949 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:38] "GET /static/css/style.css?v=67666ffb&t=1746030441 HTTP/1.1" 200 -
2025-04-30 19:27:39,027 INFO: Service worker requested
2025-04-30 19:27:39,029 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:39,030 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:39] "GET /service-worker.js?v=1746030459015 HTTP/1.1" 200 -
2025-04-30 19:27:39,045 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:39,071 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:39] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:27:40,846 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:40] "GET /login?_t=1746030460123 HTTP/1.1" 200 -
2025-04-30 19:27:40,951 INFO: Service worker requested
2025-04-30 19:27:40,953 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:40] "GET /service-worker.js?v=1746030460947 HTTP/1.1" 200 -
2025-04-30 19:27:40,973 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:40] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:40,985 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:40] "GET /?cache_bust=1746030460947 HTTP/1.1" 200 -
2025-04-30 19:27:40,996 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:40] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:41,022 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:41] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:27:41,099 INFO: Service worker requested
2025-04-30 19:27:41,101 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:41] "GET /service-worker.js?v=1746030461066 HTTP/1.1" 200 -
2025-04-30 19:27:41,134 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:41] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:27:42,739 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:42] "GET /login?_t=1746030462187 HTTP/1.1" 200 -
2025-04-30 19:27:42,846 INFO: Service worker requested
2025-04-30 19:27:42,848 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:42] "GET /service-worker.js?v=1746030462843 HTTP/1.1" 200 -
2025-04-30 19:27:42,867 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:42] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:42,888 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:42] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:42,917 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:42] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:27:49,916 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:49] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-30 19:27:49,968 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:49] "GET /admin HTTP/1.1" 200 -
2025-04-30 19:27:50,083 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:50] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 19:27:50,145 INFO: Service worker requested
2025-04-30 19:27:50,149 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:50] "GET /service-worker.js?v=1746030470134 HTTP/1.1" 200 -
2025-04-30 19:27:50,152 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:50] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:50,181 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:50] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:27:50,215 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:50] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:50,252 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:50] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:27:54,152 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:54] "GET /inventory_management?_t=1746030471310 HTTP/1.1" 200 -
2025-04-30 19:27:54,238 INFO: Service worker requested
2025-04-30 19:27:54,239 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:54] "GET /service-worker.js?v=1746030474233 HTTP/1.1" 200 -
2025-04-30 19:27:54,254 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:54] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:27:54,288 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:54] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:54,316 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:54] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:27:54,318 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:54] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:55,388 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:55] "GET /admin/manage_staff?_t=1746030474334 HTTP/1.1" 200 -
2025-04-30 19:27:55,484 INFO: Service worker requested
2025-04-30 19:27:55,489 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:55] "GET /service-worker.js?v=1746030475480 HTTP/1.1" 200 -
2025-04-30 19:27:55,547 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:27:55,552 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:55] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:27:55,555 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:55] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:27:55,580 INFO: 127.0.0.1 - - [30/Apr/2025 19:27:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:04,394 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:04] "GET /admin/manage_staff?_t=1746030476621 HTTP/1.1" 200 -
2025-04-30 19:28:04,492 INFO: Service worker requested
2025-04-30 19:28:04,495 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:04] "GET /service-worker.js?v=1746030484481 HTTP/1.1" 200 -
2025-04-30 19:28:04,515 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:04] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:04,534 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:04] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:04,538 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:04] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:04,578 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:04] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:28:05,822 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:05] "GET /admin/manage_staff?_t=1746030485625 HTTP/1.1" 200 -
2025-04-30 19:28:05,931 INFO: Service worker requested
2025-04-30 19:28:05,934 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:05] "GET /service-worker.js?v=1746030485927 HTTP/1.1" 200 -
2025-04-30 19:28:05,955 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:05] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:05,961 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:05] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:05,993 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:05] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:05,997 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:05] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:28:07,063 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:07] "GET /admin/manage_staff?_t=1746030486003 HTTP/1.1" 200 -
2025-04-30 19:28:07,159 INFO: Service worker requested
2025-04-30 19:28:07,162 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:07] "GET /service-worker.js?v=1746030487155 HTTP/1.1" 200 -
2025-04-30 19:28:07,193 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:07] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:07,194 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:07] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:07,230 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:07] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:07,232 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:07] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:28:10,983 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:10] "GET /admin?_t=1746030488293 HTTP/1.1" 200 -
2025-04-30 19:28:11,090 INFO: Service worker requested
2025-04-30 19:28:11,092 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:11] "GET /service-worker.js?v=1746030491086 HTTP/1.1" 200 -
2025-04-30 19:28:11,132 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:11,137 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:11] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:11,164 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:11,201 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:11] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:28:21,115 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:21] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:25,535 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:25] "GET /cart?_t=1746030492240 HTTP/1.1" 200 -
2025-04-30 19:28:25,651 INFO: Service worker requested
2025-04-30 19:28:25,652 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:25] "GET /service-worker.js?v=1746030505644 HTTP/1.1" 200 -
2025-04-30 19:28:25,666 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:25,667 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:25] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:25,693 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:25,713 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:25] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:28:27,432 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:27] "GET /?_t=1746030506771 HTTP/1.1" 200 -
2025-04-30 19:28:27,524 INFO: Service worker requested
2025-04-30 19:28:27,526 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:27] "GET /service-worker.js?v=1746030507515 HTTP/1.1" 200 -
2025-04-30 19:28:27,545 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:27] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:27,577 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:27] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:27,577 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:27] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:27,580 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:27] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:28:29,483 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:29] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:28:29,491 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:29] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:28:29,501 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:29] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:30,619 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:30] "GET /cart?_t=1746030509510 HTTP/1.1" 200 -
2025-04-30 19:28:30,701 INFO: Service worker requested
2025-04-30 19:28:30,703 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:30] "GET /service-worker.js?v=1746030510696 HTTP/1.1" 200 -
2025-04-30 19:28:30,741 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:30] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:30,762 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:30] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:28:32,654 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:32] "GET /checkout?_t=1746030511855 HTTP/1.1" 200 -
2025-04-30 19:28:32,734 INFO: Service worker requested
2025-04-30 19:28:32,738 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:32] "GET /service-worker.js?v=1746030512729 HTTP/1.1" 200 -
2025-04-30 19:28:32,768 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:32] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:32,775 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:32] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:32,798 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:32] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:28:32,831 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:32] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:42,742 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:42] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:43,793 WARNING: SQLAlchemy error when creating order, falling back to direct SQL: (sqlite3.OperationalError) table order has no column named reference_number
[SQL: INSERT INTO "order" (reference_number, customer_id, order_date, total_amount, status, customer_name, customer_phone, customer_email, customer_address, order_type, created_by_id, updated_at, completed_at, viewed, viewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, None, '2025-04-30 16:28:43.792974', 6000.0, 'pending', 'admin', '0743232445', 'admin@example.com', '', 'online', None, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:28:43,806 ERROR: Error in get_order_by_id: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".id = ?]
[parameters: (2,)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:28:43,807 WARNING: Created order 2 with direct SQL but can't access it
2025-04-30 19:28:43,809 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:43] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:28:43,836 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:43] "GET /cart HTTP/1.1" 200 -
2025-04-30 19:28:43,938 INFO: Service worker requested
2025-04-30 19:28:43,944 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:43] "GET /service-worker.js?v=1746030523923 HTTP/1.1" 200 -
2025-04-30 19:28:43,948 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:43,949 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:43] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:43,975 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:44,016 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:44] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:28:53,939 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:53] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:56,733 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:56] "GET /?_t=1746030525101 HTTP/1.1" 200 -
2025-04-30 19:28:56,828 INFO: Service worker requested
2025-04-30 19:28:56,830 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:56] "GET /service-worker.js?v=1746030536821 HTTP/1.1" 200 -
2025-04-30 19:28:56,855 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:56] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:28:56,860 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:56] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:56,881 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:56] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:28:56,892 INFO: 127.0.0.1 - - [30/Apr/2025 19:28:56] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:01,124 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:01] "[32mGET /logout?_t=1746030537965 HTTP/1.1[0m" 302 -
2025-04-30 19:29:01,180 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:01] "GET / HTTP/1.1" 200 -
2025-04-30 19:29:01,297 INFO: Service worker requested
2025-04-30 19:29:01,302 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:01] "GET /service-worker.js?v=1746030541284 HTTP/1.1" 200 -
2025-04-30 19:29:01,303 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:01] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:01,342 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:01] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:01,353 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:01] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:02,788 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:02] "GET /login?_t=1746030542412 HTTP/1.1" 200 -
2025-04-30 19:29:02,913 INFO: Service worker requested
2025-04-30 19:29:02,920 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:02] "GET /service-worker.js?v=1746030542901 HTTP/1.1" 200 -
2025-04-30 19:29:02,922 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:02] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:02,935 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:02] "GET /?cache_bust=1746030542902 HTTP/1.1" 200 -
2025-04-30 19:29:02,948 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:02] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:03,004 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:03] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:03,068 INFO: Service worker requested
2025-04-30 19:29:03,072 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:03] "GET /service-worker.js?v=1746030543035 HTTP/1.1" 200 -
2025-04-30 19:29:03,119 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:03] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:05,164 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:05] "GET /login?_t=1746030544184 HTTP/1.1" 200 -
2025-04-30 19:29:05,244 INFO: Service worker requested
2025-04-30 19:29:05,247 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:05] "GET /service-worker.js?v=1746030545239 HTTP/1.1" 200 -
2025-04-30 19:29:05,255 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:05] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:05,280 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:05] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:05,310 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:05] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:14,412 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:14] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-30 19:29:14,429 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:29:14,433 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:29:14,437 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:29:14,454 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:14] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 19:29:14,575 INFO: Service worker requested
2025-04-30 19:29:14,585 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:14] "GET /service-worker.js?v=1746030554560 HTTP/1.1" 200 -
2025-04-30 19:29:14,606 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:14] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:14,620 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:14] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:29:14,662 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:14] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:14,663 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:14] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:24,586 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:24] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:29:24,959 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:24] "GET /staff/all-orders?_t=1746030555716 HTTP/1.1" 200 -
2025-04-30 19:29:25,065 INFO: Service worker requested
2025-04-30 19:29:25,066 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:25] "GET /service-worker.js?v=1746030565060 HTTP/1.1" 200 -
2025-04-30 19:29:25,092 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:25,093 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:25] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:29:25,145 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:25] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:25,153 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:32,950 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:32] "GET /cart?_t=1746030566196 HTTP/1.1" 200 -
2025-04-30 19:29:33,066 INFO: Service worker requested
2025-04-30 19:29:33,067 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:33] "GET /service-worker.js?v=1746030573054 HTTP/1.1" 200 -
2025-04-30 19:29:33,099 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:33] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:29:33,100 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:33] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:33,133 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:33] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:33,137 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:33] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:35,308 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:35] "GET /checkout?_t=1746030574194 HTTP/1.1" 200 -
2025-04-30 19:29:35,384 INFO: Service worker requested
2025-04-30 19:29:35,386 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:35] "GET /service-worker.js?v=1746030575379 HTTP/1.1" 200 -
2025-04-30 19:29:35,423 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:35,424 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:35] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:29:35,435 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:35] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:35,476 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:45,404 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:45] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:29:48,000 WARNING: SQLAlchemy error when creating order, falling back to direct SQL: (sqlite3.OperationalError) table order has no column named reference_number
[SQL: INSERT INTO "order" (reference_number, customer_id, order_date, total_amount, status, customer_name, customer_phone, customer_email, customer_address, order_type, created_by_id, updated_at, completed_at, viewed, viewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, None, '2025-04-30 16:29:48.000196', 9000.0, 'pending', 'staff1', '0775538145', 'mosesharuna407@gmail.com', 'Sir Apolo Kagwa Road', 'online', None, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:29:48,008 ERROR: Error in get_order_by_id: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".id = ?]
[parameters: (3,)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:29:48,009 WARNING: Created order 3 with direct SQL but can't access it
2025-04-30 19:29:48,012 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:48] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:29:48,042 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:48] "GET /cart HTTP/1.1" 200 -
2025-04-30 19:29:48,174 INFO: Service worker requested
2025-04-30 19:29:48,183 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:48] "GET /service-worker.js?v=1746030588153 HTTP/1.1" 200 -
2025-04-30 19:29:48,185 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:48] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:48,187 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:29:48,218 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:48] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:29:48,234 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:48] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:29:58,174 INFO: 127.0.0.1 - - [30/Apr/2025 19:29:58] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:30:01,603 INFO: 127.0.0.1 - - [30/Apr/2025 19:30:01] "GET /cart HTTP/1.1" 200 -
2025-04-30 19:30:08,178 INFO: 127.0.0.1 - - [30/Apr/2025 19:30:08] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:30:18,179 INFO: 127.0.0.1 - - [30/Apr/2025 19:30:18] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:30:35,102 INFO:  * Restarting with stat
2025-04-30 19:30:36,735 WARNING:  * Debugger is active!
2025-04-30 19:30:36,745 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:30:37,561 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:30:37,562 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:30:38,616 INFO: 127.0.0.1 - - [30/Apr/2025 19:30:38] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:30:48,617 INFO: 127.0.0.1 - - [30/Apr/2025 19:30:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:30:58,178 INFO: 127.0.0.1 - - [30/Apr/2025 19:30:58] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:31:08,610 INFO: 127.0.0.1 - - [30/Apr/2025 19:31:08] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:31:18,627 INFO: 127.0.0.1 - - [30/Apr/2025 19:31:18] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:31:28,620 INFO: 127.0.0.1 - - [30/Apr/2025 19:31:28] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:31:38,622 INFO: 127.0.0.1 - - [30/Apr/2025 19:31:38] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:31:48,611 INFO: 127.0.0.1 - - [30/Apr/2025 19:31:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:31:58,617 INFO: 127.0.0.1 - - [30/Apr/2025 19:31:58] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:32:12,611 INFO: 127.0.0.1 - - [30/Apr/2025 19:32:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:33:12,636 INFO: 127.0.0.1 - - [30/Apr/2025 19:33:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:34:12,648 INFO: 127.0.0.1 - - [30/Apr/2025 19:34:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:35:12,630 INFO: 127.0.0.1 - - [30/Apr/2025 19:35:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:36:12,659 INFO: 127.0.0.1 - - [30/Apr/2025 19:36:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:36:15,810 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 19:36:15,970 INFO:  * Restarting with stat
2025-04-30 19:36:17,644 WARNING:  * Debugger is active!
2025-04-30 19:36:17,648 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:36:18,241 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:36:18,243 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:36:28,617 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 19:36:28,768 INFO:  * Restarting with stat
2025-04-30 19:36:30,223 WARNING:  * Debugger is active!
2025-04-30 19:36:30,230 INFO:  * Debugger PIN: 122-580-125
2025-04-30 19:36:31,104 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-30 19:36:31,105 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-04-30 19:37:11,218 INFO: 127.0.0.1 - - [30/Apr/2025 19:37:11] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:37:18,606 INFO: 127.0.0.1 - - [30/Apr/2025 19:37:18] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:37:28,612 INFO: 127.0.0.1 - - [30/Apr/2025 19:37:28] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:37:38,612 INFO: 127.0.0.1 - - [30/Apr/2025 19:37:38] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:37:48,612 INFO: 127.0.0.1 - - [30/Apr/2025 19:37:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:37:58,615 INFO: 127.0.0.1 - - [30/Apr/2025 19:37:58] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:38:08,618 INFO: 127.0.0.1 - - [30/Apr/2025 19:38:08] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:38:40,737 INFO: 127.0.0.1 - - [30/Apr/2025 19:38:40] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:38:48,164 INFO: 127.0.0.1 - - [30/Apr/2025 19:38:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:38:58,627 INFO: 127.0.0.1 - - [30/Apr/2025 19:38:58] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:39:08,618 INFO: 127.0.0.1 - - [30/Apr/2025 19:39:08] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:39:12,922 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 19:39:13,300 INFO:  * Restarting with stat
2025-04-30 19:44:12,759 INFO:  * Restarting with stat
2025-04-30 19:45:32,722 INFO:  * Restarting with stat
2025-04-30 19:45:34,161 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 19:46:08,463 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:08] "GET /cart HTTP/1.1" 200 -
2025-04-30 19:46:08,570 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:08] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-04-30 19:46:08,669 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:08] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 19:46:08,669 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:08] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 19:46:08,675 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:08] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 19:46:08,687 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:08] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 19:46:08,705 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:08] "GET /static/js/cart.js HTTP/1.1" 200 -
2025-04-30 19:46:08,735 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:08] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 19:46:08,972 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:08] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 19:46:09,008 INFO: Service worker requested
2025-04-30 19:46:09,011 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:09] "GET /service-worker.js?v=1746031568982 HTTP/1.1" 200 -
2025-04-30 19:46:09,029 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:09,043 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:09,044 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:09] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:09,062 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:09] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-04-30 19:46:09,071 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:09] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:15,410 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:15] "GET /checkout?_t=1746031569053 HTTP/1.1" 200 -
2025-04-30 19:46:15,505 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:15] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 19:46:15,558 INFO: Service worker requested
2025-04-30 19:46:15,561 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:15] "GET /service-worker.js?v=1746031575549 HTTP/1.1" 200 -
2025-04-30 19:46:15,573 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:15] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:15,575 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:15] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:15,606 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:15] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:15,623 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:15] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:20,241 INFO: Successfully created order 6 with direct SQL
2025-04-30 19:46:20,254 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:20] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:46:20,298 ERROR: Error loading receipt for order 6: 'str object' has no attribute 'strftime'
2025-04-30 19:46:20,301 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:20] "[32mGET /receipt/6 HTTP/1.1[0m" 302 -
2025-04-30 19:46:20,336 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:20] "GET / HTTP/1.1" 200 -
2025-04-30 19:46:20,385 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:20] "GET /static/css/style.css?v=9e719346&t=1746031534 HTTP/1.1" 200 -
2025-04-30 19:46:20,478 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:20] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:20,485 INFO: Service worker requested
2025-04-30 19:46:20,486 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:20] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:20,487 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:20] "GET /service-worker.js?v=1746031580453 HTTP/1.1" 200 -
2025-04-30 19:46:20,510 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:20] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:20,544 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:20] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:24,770 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:24] "GET /my_sales?_t=1746031581601 HTTP/1.1" 200 -
2025-04-30 19:46:24,848 INFO: Service worker requested
2025-04-30 19:46:24,849 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:24] "GET /service-worker.js?v=1746031584843 HTTP/1.1" 200 -
2025-04-30 19:46:24,860 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:24] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:24,864 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:24] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:24,911 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:24] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:24,943 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:24] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:26,383 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:26] "GET /cart?_t=1746031585992 HTTP/1.1" 200 -
2025-04-30 19:46:26,501 INFO: Service worker requested
2025-04-30 19:46:26,503 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:26] "GET /service-worker.js?v=1746031586497 HTTP/1.1" 200 -
2025-04-30 19:46:26,521 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:26] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:26,522 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:26] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:26,560 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:26] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:26,569 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:26] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:28,242 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:28] "GET /?_t=1746031587621 HTTP/1.1" 200 -
2025-04-30 19:46:28,353 INFO: Service worker requested
2025-04-30 19:46:28,354 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:28] "GET /service-worker.js?v=1746031588347 HTTP/1.1" 200 -
2025-04-30 19:46:28,373 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:28] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:28,375 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:28] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:28,404 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:28] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:28,406 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:28] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:29,858 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:29] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:29,875 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:29] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:29,891 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:29] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:31,533 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:31] "GET /cart?_t=1746031589901 HTTP/1.1" 200 -
2025-04-30 19:46:31,625 INFO: Service worker requested
2025-04-30 19:46:31,629 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:31] "GET /service-worker.js?v=1746031591621 HTTP/1.1" 200 -
2025-04-30 19:46:31,648 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:31] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:31,673 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:31] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:33,883 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:33] "GET /checkout?_t=1746031592730 HTTP/1.1" 200 -
2025-04-30 19:46:34,003 INFO: Service worker requested
2025-04-30 19:46:34,005 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:34] "GET /service-worker.js?v=1746031593997 HTTP/1.1" 200 -
2025-04-30 19:46:34,018 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:34] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:34,023 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:34] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:34,042 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:34] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:34,083 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:34] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:39,007 INFO: Successfully created order 7 with direct SQL
2025-04-30 19:46:39,021 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:39] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:46:39,045 ERROR: Error loading receipt for order 7: 'str object' has no attribute 'strftime'
2025-04-30 19:46:39,051 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:39] "[32mGET /receipt/7 HTTP/1.1[0m" 302 -
2025-04-30 19:46:39,072 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:39] "GET / HTTP/1.1" 200 -
2025-04-30 19:46:39,183 INFO: Service worker requested
2025-04-30 19:46:39,184 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:39] "GET /service-worker.js?v=1746031599155 HTTP/1.1" 200 -
2025-04-30 19:46:39,188 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:39,194 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:39] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:39,259 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:39,272 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:39] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:42,590 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:42] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:42,604 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:42] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:42,620 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:42] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:44,465 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:44] "GET /?_t=1746031602625 HTTP/1.1" 200 -
2025-04-30 19:46:44,582 INFO: Service worker requested
2025-04-30 19:46:44,585 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:44] "GET /service-worker.js?v=1746031604566 HTTP/1.1" 200 -
2025-04-30 19:46:44,587 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:44] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:44,623 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:44] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:45,694 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:45] "GET /?_t=1746031604657 HTTP/1.1" 200 -
2025-04-30 19:46:45,823 INFO: Service worker requested
2025-04-30 19:46:45,827 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:45] "GET /service-worker.js?v=1746031605814 HTTP/1.1" 200 -
2025-04-30 19:46:45,841 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:45] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:46:45,859 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:45,877 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:45] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:46:45,887 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:47,422 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:47] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:47,430 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:47] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:47,445 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:47] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:46:48,176 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:48] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:48,182 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:48] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:48,805 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:48] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:48,816 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:48] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:49,032 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:49,044 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:49,207 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:49,221 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:49,365 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:49,382 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:49,516 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:49,531 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:50,054 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:50] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:50,066 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:50] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:50,580 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:50] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:50,598 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:50] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:50,766 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:50] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:50,781 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:50] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:46:55,830 INFO: 127.0.0.1 - - [30/Apr/2025 19:46:55] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:00,618 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:00] "GET /?_t=1746031604657 HTTP/1.1" 200 -
2025-04-30 19:47:00,717 INFO: Service worker requested
2025-04-30 19:47:00,718 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:00] "GET /service-worker.js?v=1746031620710 HTTP/1.1" 200 -
2025-04-30 19:47:00,728 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:00] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:00,757 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:00] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:47:07,330 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:07] "GET /cart?_t=1746031621816 HTTP/1.1" 200 -
2025-04-30 19:47:07,436 INFO: Service worker requested
2025-04-30 19:47:07,440 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:07] "GET /service-worker.js?v=1746031627432 HTTP/1.1" 200 -
2025-04-30 19:47:07,456 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:07] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:07,468 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:07] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:07,497 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:07] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:47:07,500 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:07] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:09,299 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:09] "GET /?_t=1746031628572 HTTP/1.1" 200 -
2025-04-30 19:47:09,400 INFO: Service worker requested
2025-04-30 19:47:09,402 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:09] "GET /service-worker.js?v=1746031629394 HTTP/1.1" 200 -
2025-04-30 19:47:09,438 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:09,448 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:09] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:09,464 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:09] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:47:09,482 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:11,745 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:11] "GET /cart?_t=1746031630561 HTTP/1.1" 200 -
2025-04-30 19:47:11,845 INFO: Service worker requested
2025-04-30 19:47:11,848 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:11] "GET /service-worker.js?v=1746031631835 HTTP/1.1" 200 -
2025-04-30 19:47:11,864 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:11,879 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:11] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:11,901 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:11,902 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:11] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:47:14,720 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:14] "GET /?_t=1746031632969 HTTP/1.1" 200 -
2025-04-30 19:47:14,831 INFO: Service worker requested
2025-04-30 19:47:14,833 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:14] "GET /service-worker.js?v=1746031634824 HTTP/1.1" 200 -
2025-04-30 19:47:14,844 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:14] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:14,855 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:14] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:14,869 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:14] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:14,885 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:14] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:47:17,451 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:17] "GET /cart?_t=1746031635959 HTTP/1.1" 200 -
2025-04-30 19:47:17,551 INFO: Service worker requested
2025-04-30 19:47:17,555 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:17] "GET /service-worker.js?v=1746031637544 HTTP/1.1" 200 -
2025-04-30 19:47:17,588 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:17] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:17,589 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:17] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:17,615 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:17] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:47:17,630 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:17] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:19,522 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:19] "GET /checkout?_t=1746031638698 HTTP/1.1" 200 -
2025-04-30 19:47:19,607 INFO: Service worker requested
2025-04-30 19:47:19,622 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:19] "GET /service-worker.js?v=1746031639599 HTTP/1.1" 200 -
2025-04-30 19:47:19,629 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:19] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:19,646 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:19] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:19,699 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:19] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:47:19,701 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:19] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:23,302 INFO: Successfully created order 8 with direct SQL
2025-04-30 19:47:23,314 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:23] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:47:23,338 ERROR: Error loading receipt for order 8: 'str object' has no attribute 'strftime'
2025-04-30 19:47:23,341 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:23] "[32mGET /receipt/8 HTTP/1.1[0m" 302 -
2025-04-30 19:47:23,365 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:23] "GET / HTTP/1.1" 200 -
2025-04-30 19:47:23,483 INFO: Service worker requested
2025-04-30 19:47:23,484 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:23] "GET /service-worker.js?v=1746031643449 HTTP/1.1" 200 -
2025-04-30 19:47:23,500 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:23] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:23,564 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:23] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:23,586 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:23] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:47:23,591 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:23] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:47:33,466 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:33] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:43,616 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:43] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:47:53,609 INFO: 127.0.0.1 - - [30/Apr/2025 19:47:53] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:48:03,611 INFO: 127.0.0.1 - - [30/Apr/2025 19:48:03] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:48:13,605 INFO: 127.0.0.1 - - [30/Apr/2025 19:48:13] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:48:23,623 INFO: 127.0.0.1 - - [30/Apr/2025 19:48:23] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:48:33,607 INFO: 127.0.0.1 - - [30/Apr/2025 19:48:33] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:49:02,438 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:02] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:49:05,442 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET / HTTP/1.1" 200 -
2025-04-30 19:49:05,487 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /static/css/style.css?v=9e719346&t=1746031534 HTTP/1.1" 200 -
2025-04-30 19:49:05,608 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 19:49:05,609 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 19:49:05,609 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 19:49:05,616 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 19:49:05,618 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 19:49:05,754 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 19:49:05,763 INFO: Service worker requested
2025-04-30 19:49:05,772 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /service-worker.js?v=1746031745746 HTTP/1.1" 200 -
2025-04-30 19:49:05,773 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-04-30 19:49:05,776 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:49:05,789 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:05,804 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:05,851 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:05] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:49:11,574 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:11] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:49:11,595 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:11] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:49:11,600 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:12,945 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:12] "GET /cart?_t=1746031751604 HTTP/1.1" 200 -
2025-04-30 19:49:13,059 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:13] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 19:49:13,083 INFO: Service worker requested
2025-04-30 19:49:13,085 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:13] "GET /service-worker.js?v=1746031753055 HTTP/1.1" 200 -
2025-04-30 19:49:13,115 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:13] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:49:13,148 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:13] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:49:15,214 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:15] "GET /checkout?_t=1746031754272 HTTP/1.1" 200 -
2025-04-30 19:49:15,311 INFO: Service worker requested
2025-04-30 19:49:15,313 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:15] "GET /service-worker.js?v=1746031755303 HTTP/1.1" 200 -
2025-04-30 19:49:15,333 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:15] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:49:15,351 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:15] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:15,386 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:15] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:15,388 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:15] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:49:19,922 INFO: Successfully created order 9 with direct SQL
2025-04-30 19:49:19,935 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:19] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:49:19,973 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:19] "GET /receipt/9 HTTP/1.1" 200 -
2025-04-30 19:49:20,037 WARNING: Unhandled path requested: favicon.ico
2025-04-30 19:49:20,041 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:20] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 19:49:21,545 INFO: Service worker requested
2025-04-30 19:49:21,546 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:21] "GET /service-worker.js?v=1746031755303 HTTP/1.1" 200 -
2025-04-30 19:49:44,164 ERROR: Error in staff_order_detail: 'str object' has no attribute 'strftime'
2025-04-30 19:49:44,165 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:44] "[32mGET /staff/order/9 HTTP/1.1[0m" 302 -
2025-04-30 19:49:44,184 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:49:44,187 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:49:44,196 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:49:44,216 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:44] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 19:49:44,349 INFO: Service worker requested
2025-04-30 19:49:44,353 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:44] "GET /service-worker.js?v=1746031784325 HTTP/1.1" 200 -
2025-04-30 19:49:44,355 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:44] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:49:44,355 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:44] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:44,387 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:44] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:44,445 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:44] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:49:45,866 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:45] "GET /cart?_t=1746031785487 HTTP/1.1" 200 -
2025-04-30 19:49:45,971 INFO: Service worker requested
2025-04-30 19:49:45,978 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:45] "GET /service-worker.js?v=1746031785955 HTTP/1.1" 200 -
2025-04-30 19:49:45,996 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:45,997 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:45] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:49:46,032 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:46] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:46,044 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:46] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:49:49,326 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:49] "GET /checkout?_t=1746031787116 HTTP/1.1" 200 -
2025-04-30 19:49:49,447 INFO: Service worker requested
2025-04-30 19:49:49,451 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:49] "GET /service-worker.js?v=1746031789442 HTTP/1.1" 200 -
2025-04-30 19:49:49,467 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:49] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:49,468 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:49] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:49:49,497 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:49] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:49:49,498 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:49] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:49:59,463 INFO: 127.0.0.1 - - [30/Apr/2025 19:49:59] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:50:09,458 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:09] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:50:15,534 INFO: Successfully created order 10 with direct SQL
2025-04-30 19:50:15,545 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:15] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:50:15,567 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:15] "GET /receipt/10 HTTP/1.1" 200 -
2025-04-30 19:50:15,617 WARNING: Unhandled path requested: favicon.ico
2025-04-30 19:50:15,625 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:15] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 19:50:17,123 INFO: Service worker requested
2025-04-30 19:50:17,124 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:17] "GET /service-worker.js?v=1746031789442 HTTP/1.1" 200 -
2025-04-30 19:50:29,313 ERROR: Error in staff_order_detail: 'str object' has no attribute 'strftime'
2025-04-30 19:50:29,314 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:29] "[32mGET /staff/order/10 HTTP/1.1[0m" 302 -
2025-04-30 19:50:29,331 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:50:29,336 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:50:29,340 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:50:29,345 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:29] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 19:50:29,457 INFO: Service worker requested
2025-04-30 19:50:29,463 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:29] "GET /service-worker.js?v=1746031829447 HTTP/1.1" 200 -
2025-04-30 19:50:29,476 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:29] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:50:29,478 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:29] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:50:29,507 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:29] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:50:29,563 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:29] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:50:39,463 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:39] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:50:45,274 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:45] "GET /staff/all-orders?_t=1746031830630 HTTP/1.1" 200 -
2025-04-30 19:50:45,385 INFO: Service worker requested
2025-04-30 19:50:45,388 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:45] "GET /service-worker.js?v=1746031845380 HTTP/1.1" 200 -
2025-04-30 19:50:45,398 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:50:45,402 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:45] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:50:45,464 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:50:45,470 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:45] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:50:52,806 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:52] "GET /?_t=1746031846529 HTTP/1.1" 200 -
2025-04-30 19:50:52,923 INFO: Service worker requested
2025-04-30 19:50:52,926 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:52] "GET /service-worker.js?v=1746031852905 HTTP/1.1" 200 -
2025-04-30 19:50:52,946 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:52] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:50:52,970 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:52] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:50:52,973 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:52] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:50:52,997 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:52] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:50:54,439 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:54] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:50:54,458 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:54] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 19:50:54,471 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:54] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:50:56,644 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:56] "GET /cart?_t=1746031856465 HTTP/1.1" 200 -
2025-04-30 19:50:56,742 INFO: Service worker requested
2025-04-30 19:50:56,747 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:56] "GET /service-worker.js?v=1746031856733 HTTP/1.1" 200 -
2025-04-30 19:50:56,773 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:56] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:50:56,792 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:56] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:50:59,804 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:59] "GET /checkout?_t=1746031857873 HTTP/1.1" 200 -
2025-04-30 19:50:59,902 INFO: Service worker requested
2025-04-30 19:50:59,905 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:59] "GET /service-worker.js?v=1746031859890 HTTP/1.1" 200 -
2025-04-30 19:50:59,917 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:59] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:50:59,926 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:59] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:50:59,958 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:59] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:50:59,993 INFO: 127.0.0.1 - - [30/Apr/2025 19:50:59] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:51:05,897 INFO: Successfully created order 11 with direct SQL
2025-04-30 19:51:05,906 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:05] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:51:05,926 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:05] "GET /receipt/11 HTTP/1.1" 200 -
2025-04-30 19:51:05,979 WARNING: Unhandled path requested: favicon.ico
2025-04-30 19:51:05,984 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:05] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 19:51:07,488 INFO: Service worker requested
2025-04-30 19:51:07,489 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:07] "GET /service-worker.js?v=1746031859890 HTTP/1.1" 200 -
2025-04-30 19:51:13,245 ERROR: Error in staff_order_detail: 'str object' has no attribute 'strftime'
2025-04-30 19:51:13,249 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:13] "[32mGET /staff/order/11 HTTP/1.1[0m" 302 -
2025-04-30 19:51:13,268 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:51:13,270 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:51:13,273 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:51:13,278 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:13] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 19:51:13,383 INFO: Service worker requested
2025-04-30 19:51:13,394 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:13] "GET /service-worker.js?v=1746031873373 HTTP/1.1" 200 -
2025-04-30 19:51:13,400 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:13] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:51:13,403 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:13] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:51:13,429 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:13] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:51:13,489 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:13] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:51:23,385 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:23] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:51:28,792 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:28] "GET /cart?_t=1746031874544 HTTP/1.1" 200 -
2025-04-30 19:51:28,907 INFO: Service worker requested
2025-04-30 19:51:28,912 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:28] "GET /service-worker.js?v=1746031888902 HTTP/1.1" 200 -
2025-04-30 19:51:28,933 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:28] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:51:28,934 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:28] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:51:28,954 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:28] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:51:28,975 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:28] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:51:39,619 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:39] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:51:49,608 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:49] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:51:59,606 INFO: 127.0.0.1 - - [30/Apr/2025 19:51:59] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:52:09,605 INFO: 127.0.0.1 - - [30/Apr/2025 19:52:09] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:56:19,275 INFO:  * Restarting with stat
2025-04-30 19:56:20,693 INFO:  * Running on http://127.0.0.1:5001/ (Press CTRL+C to quit)
2025-04-30 19:56:35,469 INFO: 127.0.0.1 - - [30/Apr/2025 19:56:35] "GET /receipt/5 HTTP/1.1" 200 -
2025-04-30 19:57:45,456 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /cart?_t=1746031874544 HTTP/1.1" 200 -
2025-04-30 19:57:45,591 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-04-30 19:57:45,616 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 19:57:45,620 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 19:57:45,630 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 19:57:45,632 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 19:57:45,640 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/js/cart.js HTTP/1.1" 200 -
2025-04-30 19:57:45,664 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 19:57:45,761 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 19:57:45,800 INFO: Service worker requested
2025-04-30 19:57:45,805 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:57:45,806 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /service-worker.js?v=1746032265775 HTTP/1.1" 200 -
2025-04-30 19:57:45,817 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:57:45,824 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:57:45,855 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:57:45,860 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/js/create-fallback-images.js HTTP/1.1" 200 -
2025-04-30 19:57:45,884 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/js/update-manifest.js HTTP/1.1" 200 -
2025-04-30 19:57:45,886 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/js/icon-handler.js HTTP/1.1" 200 -
2025-04-30 19:57:45,920 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/sounds/notification.wav HTTP/1.1" 200 -
2025-04-30 19:57:45,923 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-04-30 19:57:45,924 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:45] "GET /static/manifest.json HTTP/1.1" 200 -
2025-04-30 19:57:55,794 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:55] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:57:57,264 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:57] "GET /checkout?_t=1746032266070 HTTP/1.1" 200 -
2025-04-30 19:57:57,388 INFO: Service worker requested
2025-04-30 19:57:57,390 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:57] "GET /service-worker.js?v=1746032277385 HTTP/1.1" 200 -
2025-04-30 19:57:57,421 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:57] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:57:57,423 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:57] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:57:57,455 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:57] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:57:57,464 INFO: 127.0.0.1 - - [30/Apr/2025 19:57:57] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:58:02,146 INFO: Successfully created order 12 with direct SQL
2025-04-30 19:58:02,157 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:02] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 19:58:02,179 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:02] "GET /receipt/12 HTTP/1.1" 200 -
2025-04-30 19:58:02,244 WARNING: Unhandled path requested: favicon.ico
2025-04-30 19:58:02,245 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:02] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 19:58:03,768 INFO: Service worker requested
2025-04-30 19:58:03,770 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:03] "GET /service-worker.js?v=1746032277385 HTTP/1.1" 200 -
2025-04-30 19:58:08,029 ERROR: Error in staff_order_detail: Could not build url for endpoint 'staff_update_order_status' with values ['order_id']. Did you mean 'staff_order_detail' instead?
2025-04-30 19:58:08,031 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:08] "[32mGET /staff/order/12 HTTP/1.1[0m" 302 -
2025-04-30 19:58:08,048 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:58:08,053 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:58:08,060 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 19:58:08,078 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:08] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 19:58:08,197 INFO: Service worker requested
2025-04-30 19:58:08,201 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:08] "GET /service-worker.js?v=1746032288190 HTTP/1.1" 200 -
2025-04-30 19:58:08,222 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:08] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:58:08,261 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:08] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:58:08,273 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:08] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 19:58:08,327 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:08] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 19:58:18,219 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:18] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:58:28,221 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:28] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:58:38,620 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:38] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:58:48,610 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:58:58,618 INFO: 127.0.0.1 - - [30/Apr/2025 19:58:58] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:59:06,335 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 19:59:06,594 INFO:  * Restarting with stat
2025-04-30 19:59:08,197 INFO:  * Running on http://127.0.0.1:5001/ (Press CTRL+C to quit)
2025-04-30 19:59:08,644 INFO: 127.0.0.1 - - [30/Apr/2025 19:59:08] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:59:11,962 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 19:59:12,120 INFO:  * Restarting with stat
2025-04-30 19:59:13,791 INFO:  * Running on http://127.0.0.1:5001/ (Press CTRL+C to quit)
2025-04-30 19:59:18,655 INFO: 127.0.0.1 - - [30/Apr/2025 19:59:18] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:59:28,611 INFO: 127.0.0.1 - - [30/Apr/2025 19:59:28] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 19:59:28,638 INFO:  * Restarting with stat
2025-04-30 19:59:30,049 INFO:  * Running on http://127.0.0.1:5001/ (Press CTRL+C to quit)
2025-04-30 19:59:48,427 INFO: 127.0.0.1 - - [30/Apr/2025 19:59:48] "[32mGET /staff/order/12 HTTP/1.1[0m" 302 -
2025-04-30 19:59:48,455 INFO: 127.0.0.1 - - [30/Apr/2025 19:59:48] "GET /login?next=%2Fstaff%2Forder%2F12 HTTP/1.1" 200 -
2025-04-30 20:00:12,634 INFO: 127.0.0.1 - - [30/Apr/2025 20:00:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:00:23,909 INFO: 127.0.0.1 - - [30/Apr/2025 20:00:23] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:00:38,609 INFO: 127.0.0.1 - - [30/Apr/2025 20:00:38] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:00:48,611 INFO: 127.0.0.1 - - [30/Apr/2025 20:00:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:00:58,621 INFO: 127.0.0.1 - - [30/Apr/2025 20:00:58] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:01:08,609 INFO: 127.0.0.1 - - [30/Apr/2025 20:01:08] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:01:18,617 INFO: 127.0.0.1 - - [30/Apr/2025 20:01:18] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:01:57,377 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\fix_order_table.py', reloading
2025-04-30 20:02:28,362 INFO:  * Restarting with stat
2025-04-30 20:02:29,743 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 20:03:56,170 INFO: 127.0.0.1 - - [30/Apr/2025 20:03:56] "GET /my_sales?_t=1746032289373 HTTP/1.1" 200 -
2025-04-30 20:03:56,401 INFO: Service worker requested
2025-04-30 20:03:56,406 INFO: 127.0.0.1 - - [30/Apr/2025 20:03:56] "GET /service-worker.js?v=1746032636396 HTTP/1.1" 200 -
2025-04-30 20:03:56,429 INFO: 127.0.0.1 - - [30/Apr/2025 20:03:56] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:03:56,444 INFO: 127.0.0.1 - - [30/Apr/2025 20:03:56] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:03:56,469 INFO: 127.0.0.1 - - [30/Apr/2025 20:03:56] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:03:56,481 INFO: 127.0.0.1 - - [30/Apr/2025 20:03:56] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:04:00,169 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:00] "GET /in_store_sale?_t=1746032637538 HTTP/1.1" 200 -
2025-04-30 20:04:00,284 INFO: Service worker requested
2025-04-30 20:04:00,286 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:00] "GET /service-worker.js?v=1746032640278 HTTP/1.1" 200 -
2025-04-30 20:04:00,298 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:00] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:00,322 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:00] "GET /api/pending_orders HTTP/1.1" 200 -
2025-04-30 20:04:00,372 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:00] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:00,413 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:00] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:04:00,413 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:00] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:08,798 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:08] "GET /?_t=1746032641459 HTTP/1.1" 200 -
2025-04-30 20:04:08,917 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:08] "GET /static/css/style.css?v=f1af2165&t=1746032549 HTTP/1.1" 200 -
2025-04-30 20:04:08,989 INFO: Service worker requested
2025-04-30 20:04:08,994 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:08] "GET /service-worker.js?v=1746032648977 HTTP/1.1" 200 -
2025-04-30 20:04:09,004 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:09,005 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:09] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:09,027 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:09,056 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:09] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:04:10,177 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:10] "GET /cart?_t=1746032649120 HTTP/1.1" 200 -
2025-04-30 20:04:10,285 INFO: Service worker requested
2025-04-30 20:04:10,287 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:10] "GET /service-worker.js?v=1746032650280 HTTP/1.1" 200 -
2025-04-30 20:04:10,326 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:10] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:10,328 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:10] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:10,365 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:10] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:10,396 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:10] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:04:11,454 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:11] "GET /in_store_sale?_t=1746032650385 HTTP/1.1" 200 -
2025-04-30 20:04:11,567 INFO: Service worker requested
2025-04-30 20:04:11,572 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:11] "GET /service-worker.js?v=1746032651563 HTTP/1.1" 200 -
2025-04-30 20:04:11,601 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:11,625 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:11] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:11,638 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:11] "GET /api/pending_orders HTTP/1.1" 200 -
2025-04-30 20:04:11,654 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:11] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:04:11,680 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:21,573 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:21] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:24,250 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:24] "GET /api/pending_orders HTTP/1.1" 200 -
2025-04-30 20:04:31,576 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:31] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:31,584 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:31] "GET /api/pending_orders HTTP/1.1" 200 -
2025-04-30 20:04:41,573 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:41] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:41,774 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:41] "GET /?_t=1746032680298 HTTP/1.1" 200 -
2025-04-30 20:04:41,879 INFO: Service worker requested
2025-04-30 20:04:41,881 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:41] "GET /service-worker.js?v=1746032681868 HTTP/1.1" 200 -
2025-04-30 20:04:41,907 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:41] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:41,925 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:41,935 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:41] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:04:41,952 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:43,349 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:43] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 20:04:43,367 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:43] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 20:04:43,381 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:44,643 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:44] "GET /cart?_t=1746032683391 HTTP/1.1" 200 -
2025-04-30 20:04:44,741 INFO: Service worker requested
2025-04-30 20:04:44,751 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:44] "GET /service-worker.js?v=1746032684737 HTTP/1.1" 200 -
2025-04-30 20:04:44,776 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:44] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:44,822 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:44] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:04:46,177 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:46] "GET /in_store_sale?_t=1746032685903 HTTP/1.1" 200 -
2025-04-30 20:04:46,267 INFO: Service worker requested
2025-04-30 20:04:46,272 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:46] "GET /service-worker.js?v=1746032686263 HTTP/1.1" 200 -
2025-04-30 20:04:46,343 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:46] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:46,351 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:46] "GET /api/pending_orders HTTP/1.1" 200 -
2025-04-30 20:04:46,357 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:46] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:04:46,359 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:46] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:46,367 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:46] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:55,377 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:55] "GET /in_store_sale?_t=1746032694397 HTTP/1.1" 200 -
2025-04-30 20:04:55,485 INFO: Service worker requested
2025-04-30 20:04:55,491 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:55] "GET /service-worker.js?v=1746032695480 HTTP/1.1" 200 -
2025-04-30 20:04:55,525 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:04:55,529 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:55] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:04:55,532 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:55] "GET /api/pending_orders HTTP/1.1" 200 -
2025-04-30 20:04:55,556 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:55] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:04:55,591 INFO: 127.0.0.1 - - [30/Apr/2025 20:04:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:01,202 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:01] "[32mGET /logout?_t=1746032696635 HTTP/1.1[0m" 302 -
2025-04-30 20:05:01,222 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:01] "GET / HTTP/1.1" 200 -
2025-04-30 20:05:01,336 INFO: Service worker requested
2025-04-30 20:05:01,339 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:01] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:01,340 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:01] "GET /service-worker.js?v=1746032701321 HTTP/1.1" 200 -
2025-04-30 20:05:01,370 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:01] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:01,437 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:01] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:05:02,800 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:02] "GET /login?_t=1746032702500 HTTP/1.1" 200 -
2025-04-30 20:05:02,930 INFO: Service worker requested
2025-04-30 20:05:02,933 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:02] "GET /service-worker.js?v=1746032702920 HTTP/1.1" 200 -
2025-04-30 20:05:02,945 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:02] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:02,956 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:02] "GET /?cache_bust=1746032702920 HTTP/1.1" 200 -
2025-04-30 20:05:02,974 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:02] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:03,027 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:03] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:05:03,092 INFO: Service worker requested
2025-04-30 20:05:03,094 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:03] "GET /service-worker.js?v=1746032703052 HTTP/1.1" 200 -
2025-04-30 20:05:03,176 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:03] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:05:04,344 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:04] "GET /login?_t=1746032704236 HTTP/1.1" 200 -
2025-04-30 20:05:04,429 INFO: Service worker requested
2025-04-30 20:05:04,431 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:04] "GET /service-worker.js?v=1746032704425 HTTP/1.1" 200 -
2025-04-30 20:05:04,437 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:04] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:04,464 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:04] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:04,508 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:04] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:05:12,471 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:12] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-30 20:05:12,513 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:12] "GET /admin HTTP/1.1" 200 -
2025-04-30 20:05:12,654 INFO: Service worker requested
2025-04-30 20:05:12,657 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:12] "GET /service-worker.js?v=1746032712646 HTTP/1.1" 200 -
2025-04-30 20:05:12,660 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:12] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:12,695 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:05:12,704 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:12] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:12,739 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:12] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:05:22,541 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:22] "GET /inventory_management?_t=1746032713809 HTTP/1.1" 200 -
2025-04-30 20:05:22,630 INFO: Service worker requested
2025-04-30 20:05:22,632 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:22] "GET /service-worker.js?v=1746032722624 HTTP/1.1" 200 -
2025-04-30 20:05:22,674 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:22] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:22,675 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:22] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:05:22,716 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:22] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:22,729 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:22] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:05:32,653 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:32] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:05:39,415 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:39] "GET /admin/manage_staff?_t=1746032723779 HTTP/1.1" 200 -
2025-04-30 20:05:39,521 INFO: Service worker requested
2025-04-30 20:05:39,523 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:39] "GET /service-worker.js?v=1746032739510 HTTP/1.1" 200 -
2025-04-30 20:05:39,546 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:39,553 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:39] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:05:39,604 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:39,627 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:39] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:05:41,603 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:41] "GET /inventory_management?_t=1746032740678 HTTP/1.1" 200 -
2025-04-30 20:05:41,717 INFO: Service worker requested
2025-04-30 20:05:41,718 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:41] "GET /service-worker.js?v=1746032741706 HTTP/1.1" 200 -
2025-04-30 20:05:41,734 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:41] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:05:41,754 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:41,801 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:41,806 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:41] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:05:42,906 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:42] "GET /reports?_t=1746032741813 HTTP/1.1" 200 -
2025-04-30 20:05:43,007 INFO: Service worker requested
2025-04-30 20:05:43,009 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:43] "GET /service-worker.js?v=1746032743002 HTTP/1.1" 200 -
2025-04-30 20:05:43,071 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:43] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:05:43,075 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:43,089 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:43] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:05:43,138 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:05:43,155 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:43] "GET /api/sales/daily?start_date=2025-03-31&end_date=2025-04-30 HTTP/1.1" 200 -
2025-04-30 20:05:47,716 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:47] "GET /api/sales/weekly HTTP/1.1" 200 -
2025-04-30 20:05:49,097 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:49] "GET /api/sales/monthly HTTP/1.1" 200 -
2025-04-30 20:05:53,019 INFO: 127.0.0.1 - - [30/Apr/2025 20:05:53] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:03,020 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:03] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:09,113 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:09] "GET /admin?_t=1746032749120 HTTP/1.1" 200 -
2025-04-30 20:06:09,243 INFO: Service worker requested
2025-04-30 20:06:09,247 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:09] "GET /service-worker.js?v=1746032769238 HTTP/1.1" 200 -
2025-04-30 20:06:09,281 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:09,286 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:09] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:09,332 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:09] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:06:09,334 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:15,761 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:15] "GET /admin?_t=1746032770387 HTTP/1.1" 200 -
2025-04-30 20:06:15,888 INFO: Service worker requested
2025-04-30 20:06:15,890 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:15] "GET /service-worker.js?v=1746032775881 HTTP/1.1" 200 -
2025-04-30 20:06:15,935 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:15] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:15,982 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:15] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:15,985 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:15] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:15,986 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:15] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:06:17,571 INFO: Service worker requested
2025-04-30 20:06:17,573 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:17] "GET /service-worker.js?v=1746032775881 HTTP/1.1" 200 -
2025-04-30 20:06:17,595 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:17] "GET /inventory_management?_t=1746032775998 HTTP/1.1" 200 -
2025-04-30 20:06:17,688 INFO: Service worker requested
2025-04-30 20:06:17,690 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:17] "GET /service-worker.js?v=1746032777683 HTTP/1.1" 200 -
2025-04-30 20:06:17,705 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:17] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:17,755 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:17] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:06:23,954 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:23] "GET /inventory_management?_t=1746032778805 HTTP/1.1" 200 -
2025-04-30 20:06:24,075 INFO: Service worker requested
2025-04-30 20:06:24,079 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:24] "GET /service-worker.js?v=1746032784069 HTTP/1.1" 200 -
2025-04-30 20:06:24,099 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:24] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:24,107 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:24] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:24,138 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:24] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:24,167 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:24] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:06:25,233 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:25] "GET /admin/manage_staff?_t=1746032784146 HTTP/1.1" 200 -
2025-04-30 20:06:25,337 INFO: Service worker requested
2025-04-30 20:06:25,340 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:25] "GET /service-worker.js?v=1746032785332 HTTP/1.1" 200 -
2025-04-30 20:06:25,385 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:25,388 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:25] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:25,417 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:25,431 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:25] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:06:26,499 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:26] "GET /reports?_t=1746032785433 HTTP/1.1" 200 -
2025-04-30 20:06:26,620 INFO: Service worker requested
2025-04-30 20:06:26,623 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:26] "GET /service-worker.js?v=1746032786615 HTTP/1.1" 200 -
2025-04-30 20:06:26,699 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:26] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:26,705 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:26] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:06:26,706 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:26] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:26,752 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:26] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:26,767 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:26] "GET /api/sales/daily?start_date=2025-03-31&end_date=2025-04-30 HTTP/1.1" 200 -
2025-04-30 20:06:27,806 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:27] "GET /inventory_management?_t=1746032786811 HTTP/1.1" 200 -
2025-04-30 20:06:27,903 INFO: Service worker requested
2025-04-30 20:06:27,906 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:27] "GET /service-worker.js?v=1746032787896 HTTP/1.1" 200 -
2025-04-30 20:06:27,918 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:27] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:27,922 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:27] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:27,972 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:27] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:28,003 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:28] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:06:29,072 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:29] "GET /inventory_management?_t=1746032787998 HTTP/1.1" 200 -
2025-04-30 20:06:29,201 INFO: Service worker requested
2025-04-30 20:06:29,203 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:29] "GET /service-worker.js?v=1746032789193 HTTP/1.1" 200 -
2025-04-30 20:06:29,215 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:29] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:29,237 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:29] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:29,268 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:29] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:06:29,270 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:29] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:06:39,205 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:39] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:49,223 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:49] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:06:59,207 INFO: 127.0.0.1 - - [30/Apr/2025 20:06:59] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:07:09,209 INFO: 127.0.0.1 - - [30/Apr/2025 20:07:09] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:07:19,203 INFO: 127.0.0.1 - - [30/Apr/2025 20:07:19] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:07:29,208 INFO: 127.0.0.1 - - [30/Apr/2025 20:07:29] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:07:39,211 INFO: 127.0.0.1 - - [30/Apr/2025 20:07:39] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:07:49,208 INFO: 127.0.0.1 - - [30/Apr/2025 20:07:49] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:07:59,206 INFO: 127.0.0.1 - - [30/Apr/2025 20:07:59] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:08:09,204 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:09] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:08:19,203 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:19] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:08:28,234 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:28] "GET /cart?_t=1746032790325 HTTP/1.1" 200 -
2025-04-30 20:08:28,353 INFO: Service worker requested
2025-04-30 20:08:28,354 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:28] "GET /service-worker.js?v=1746032908336 HTTP/1.1" 200 -
2025-04-30 20:08:28,365 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:28] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:08:28,369 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:28] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:08:28,391 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:28] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:08:28,414 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:28] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:08:30,934 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:30] "GET /checkout?_t=1746032909496 HTTP/1.1" 200 -
2025-04-30 20:08:31,085 INFO: Service worker requested
2025-04-30 20:08:31,087 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:31] "GET /service-worker.js?v=1746032911078 HTTP/1.1" 200 -
2025-04-30 20:08:31,150 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:31] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:08:31,154 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:31] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:08:31,156 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:31] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:08:31,184 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:31] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:08:40,596 INFO: Successfully created order 13 with direct SQL
2025-04-30 20:08:40,604 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:40] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 20:08:40,639 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:40] "GET /receipt/13 HTTP/1.1" 200 -
2025-04-30 20:08:40,707 WARNING: Unhandled path requested: favicon.ico
2025-04-30 20:08:40,713 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:40] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 20:08:42,229 INFO: Service worker requested
2025-04-30 20:08:42,232 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:42] "GET /service-worker.js?v=1746032911078 HTTP/1.1" 200 -
2025-04-30 20:08:53,519 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:53] "GET /receipt/13 HTTP/1.1" 200 -
2025-04-30 20:08:55,236 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:55] "[32mGET /checkout?_t=1746032909496 HTTP/1.1[0m" 302 -
2025-04-30 20:08:55,264 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:55] "GET /cart HTTP/1.1" 200 -
2025-04-30 20:08:55,370 INFO: Service worker requested
2025-04-30 20:08:55,372 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:55] "GET /service-worker.js?v=1746032935349 HTTP/1.1" 200 -
2025-04-30 20:08:55,380 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:08:55,385 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:55] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:08:55,445 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:08:55,450 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:55] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:08:58,081 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:58] "GET /?_t=1746032936506 HTTP/1.1" 200 -
2025-04-30 20:08:58,188 INFO: Service worker requested
2025-04-30 20:08:58,189 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:58] "GET /service-worker.js?v=1746032938178 HTTP/1.1" 200 -
2025-04-30 20:08:58,212 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:58] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:08:58,224 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:58] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:08:58,248 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:58] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:08:58,248 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:58] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:08:59,888 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:59] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 20:08:59,900 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:59] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 20:08:59,911 INFO: 127.0.0.1 - - [30/Apr/2025 20:08:59] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:09:02,042 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:02] "GET /cart?_t=1746032941907 HTTP/1.1" 200 -
2025-04-30 20:09:02,147 INFO: Service worker requested
2025-04-30 20:09:02,149 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:02] "GET /service-worker.js?v=1746032942132 HTTP/1.1" 200 -
2025-04-30 20:09:02,154 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:02] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:09:02,194 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:02] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:09:05,877 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:05] "GET /?_t=1746032943274 HTTP/1.1" 200 -
2025-04-30 20:09:05,996 INFO: Service worker requested
2025-04-30 20:09:05,999 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:05] "GET /service-worker.js?v=1746032945981 HTTP/1.1" 200 -
2025-04-30 20:09:06,012 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:06] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:09:06,015 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:06] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:09:06,044 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:06] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:09:06,059 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:06] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:09:07,632 INFO: Service worker requested
2025-04-30 20:09:07,633 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:07] "GET /service-worker.js?v=1746032945981 HTTP/1.1" 200 -
2025-04-30 20:09:08,544 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:08] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 20:09:08,560 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:08] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 20:09:15,993 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:15] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:09:26,610 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:26] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:09:36,610 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:36] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:09:46,615 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:46] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:09:56,607 INFO: 127.0.0.1 - - [30/Apr/2025 20:09:56] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:10:06,606 INFO: 127.0.0.1 - - [30/Apr/2025 20:10:06] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:10:16,023 INFO: 127.0.0.1 - - [30/Apr/2025 20:10:16] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:10:26,609 INFO: 127.0.0.1 - - [30/Apr/2025 20:10:26] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:10:27,004 INFO: 127.0.0.1 - - [30/Apr/2025 20:10:27] "GET / HTTP/1.1" 200 -
2025-04-30 20:10:36,610 INFO: 127.0.0.1 - - [30/Apr/2025 20:10:36] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:10:46,617 INFO: 127.0.0.1 - - [30/Apr/2025 20:10:46] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:10:56,630 INFO: 127.0.0.1 - - [30/Apr/2025 20:10:56] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:11:06,609 INFO: Service worker requested
2025-04-30 20:11:06,611 INFO: 127.0.0.1 - - [30/Apr/2025 20:11:06] "GET /service-worker.js?v=1746032945981 HTTP/1.1" 200 -
2025-04-30 20:11:06,612 INFO: 127.0.0.1 - - [30/Apr/2025 20:11:06] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:11:16,616 INFO: 127.0.0.1 - - [30/Apr/2025 20:11:16] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:12:12,622 INFO: 127.0.0.1 - - [30/Apr/2025 20:12:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:12:34,558 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 20:12:34,773 INFO:  * Restarting with stat
2025-04-30 20:12:36,502 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 20:12:58,644 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 20:12:58,811 INFO:  * Restarting with stat
2025-04-30 20:13:00,267 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 20:13:12,645 INFO: 127.0.0.1 - - [30/Apr/2025 20:13:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:13:50,220 INFO: 127.0.0.1 - - [30/Apr/2025 20:13:50] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:13:55,993 INFO: 127.0.0.1 - - [30/Apr/2025 20:13:55] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:05,994 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:05] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:15,992 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:15] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:25,997 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:25] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:36,617 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:36] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:43,675 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:43] "GET /?_t=1746032943274 HTTP/1.1" 200 -
2025-04-30 20:14:43,773 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:43] "GET /static/css/style.css?v=a80756ec&t=1746033180 HTTP/1.1" 200 -
2025-04-30 20:14:43,945 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:43] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 20:14:43,946 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:43] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 20:14:43,947 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:43] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 20:14:43,949 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:43] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 20:14:43,949 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:43] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 20:14:44,041 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:44] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 20:14:44,062 INFO: Service worker requested
2025-04-30 20:14:44,074 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:44] "GET /service-worker.js?v=1746033284044 HTTP/1.1" 200 -
2025-04-30 20:14:44,081 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:44] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:44,083 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:44] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-04-30 20:14:44,085 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:44] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:44,107 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:44] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:44,143 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:44] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:14:46,257 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:46] "GET /cart?_t=1746033285175 HTTP/1.1" 200 -
2025-04-30 20:14:46,357 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:46] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 20:14:46,384 INFO: Service worker requested
2025-04-30 20:14:46,388 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:46] "GET /service-worker.js?v=1746033286366 HTTP/1.1" 200 -
2025-04-30 20:14:46,389 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:46] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:46,398 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:46] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:46,413 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:46] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:46,430 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:46] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:14:48,256 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:48] "GET /checkout?_t=1746033287544 HTTP/1.1" 200 -
2025-04-30 20:14:48,404 INFO: Service worker requested
2025-04-30 20:14:48,406 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:48] "GET /service-worker.js?v=1746033288384 HTTP/1.1" 200 -
2025-04-30 20:14:48,439 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:48,452 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:48] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:48,476 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:48] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:14:48,478 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:48] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:50,487 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:50] "GET /reports?_t=1746033289521 HTTP/1.1" 200 -
2025-04-30 20:14:50,608 INFO: Service worker requested
2025-04-30 20:14:50,610 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:50] "GET /service-worker.js?v=1746033290597 HTTP/1.1" 200 -
2025-04-30 20:14:50,639 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:50] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:50,655 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:50] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:50,696 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:50] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:14:50,726 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:50] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:50,741 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:50] "GET /api/sales/daily?start_date=2025-03-31&end_date=2025-04-30 HTTP/1.1" 200 -
2025-04-30 20:14:51,807 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:51] "GET /inventory_management?_t=1746033290782 HTTP/1.1" 200 -
2025-04-30 20:14:51,909 INFO: Service worker requested
2025-04-30 20:14:51,910 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:51] "GET /service-worker.js?v=1746033291902 HTTP/1.1" 200 -
2025-04-30 20:14:51,922 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:51] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:51,929 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:51] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:51,962 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:51] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:51,964 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:51] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:14:53,465 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:53] "GET /admin/manage_staff?_t=1746033293018 HTTP/1.1" 200 -
2025-04-30 20:14:53,561 INFO: Service worker requested
2025-04-30 20:14:53,564 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:53] "GET /service-worker.js?v=1746033293557 HTTP/1.1" 200 -
2025-04-30 20:14:53,592 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:53] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:53,594 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:53] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:53,612 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:53] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:53,632 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:53] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:14:54,866 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:54] "GET /admin?_t=1746033294683 HTTP/1.1" 200 -
2025-04-30 20:14:54,993 INFO: Service worker requested
2025-04-30 20:14:54,994 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:54] "GET /service-worker.js?v=1746033294989 HTTP/1.1" 200 -
2025-04-30 20:14:55,023 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:55] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:55,024 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:55,057 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:55,058 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:55] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:14:56,126 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:56] "GET /cart?_t=1746033295063 HTTP/1.1" 200 -
2025-04-30 20:14:56,307 INFO: Service worker requested
2025-04-30 20:14:56,308 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:56] "GET /service-worker.js?v=1746033296303 HTTP/1.1" 200 -
2025-04-30 20:14:56,327 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:56] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:56,328 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:56] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:14:56,358 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:56] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:56,370 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:56] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:14:58,271 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:58] "[32mGET /logout?_t=1746033297409 HTTP/1.1[0m" 302 -
2025-04-30 20:14:58,288 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:58] "GET / HTTP/1.1" 200 -
2025-04-30 20:14:58,389 INFO: Service worker requested
2025-04-30 20:14:58,391 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:58] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:58,392 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:58] "GET /service-worker.js?v=1746033298379 HTTP/1.1" 200 -
2025-04-30 20:14:58,410 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:58] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:14:58,431 INFO: 127.0.0.1 - - [30/Apr/2025 20:14:58] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:00,061 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:00] "GET /login?_t=1746033299494 HTTP/1.1" 200 -
2025-04-30 20:15:00,164 INFO: Service worker requested
2025-04-30 20:15:00,170 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:00] "GET /service-worker.js?v=1746033300153 HTTP/1.1" 200 -
2025-04-30 20:15:00,176 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:00] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:00,186 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:00] "GET /?cache_bust=1746033300154 HTTP/1.1" 200 -
2025-04-30 20:15:00,191 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:00] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:00,217 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:00] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:00,302 INFO: Service worker requested
2025-04-30 20:15:00,304 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:00] "GET /service-worker.js?v=1746033300285 HTTP/1.1" 200 -
2025-04-30 20:15:00,334 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:00] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:01,392 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:01] "GET /login?_t=1746033300296 HTTP/1.1" 200 -
2025-04-30 20:15:01,488 INFO: Service worker requested
2025-04-30 20:15:01,490 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:01] "GET /service-worker.js?v=1746033301485 HTTP/1.1" 200 -
2025-04-30 20:15:01,502 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:01] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:01,514 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:01] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:01,536 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:01] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:09,035 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:09] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-30 20:15:09,046 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 20:15:09,052 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 20:15:09,056 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 20:15:09,071 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:09] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 20:15:09,177 INFO: Service worker requested
2025-04-30 20:15:09,180 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:09] "GET /service-worker.js?v=1746033309170 HTTP/1.1" 200 -
2025-04-30 20:15:09,190 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:09,193 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:09] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:09,224 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:09] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:09,258 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:09] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:12,294 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:12] "GET /in_store_sale?_t=1746033310298 HTTP/1.1" 200 -
2025-04-30 20:15:12,400 INFO: Service worker requested
2025-04-30 20:15:12,401 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:12] "GET /service-worker.js?v=1746033312391 HTTP/1.1" 200 -
2025-04-30 20:15:12,433 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:12] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:12,437 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:12] "GET /api/pending_orders HTTP/1.1" 200 -
2025-04-30 20:15:12,439 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:12,474 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:12] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:12,484 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:12] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:20,325 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:20] "GET /in_store_sale?_t=1746033318682 HTTP/1.1" 200 -
2025-04-30 20:15:20,430 INFO: Service worker requested
2025-04-30 20:15:20,433 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:20] "GET /service-worker.js?v=1746033320421 HTTP/1.1" 200 -
2025-04-30 20:15:20,459 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:20] "GET /api/pending_orders HTTP/1.1" 200 -
2025-04-30 20:15:20,470 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:20] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:20,493 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:20] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:20,493 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:20] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:20,518 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:20] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:22,346 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:22] "GET /cart?_t=1746033321544 HTTP/1.1" 200 -
2025-04-30 20:15:22,442 INFO: Service worker requested
2025-04-30 20:15:22,447 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:22] "GET /service-worker.js?v=1746033322435 HTTP/1.1" 200 -
2025-04-30 20:15:22,465 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:22] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:22,473 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:22] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:22,500 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:22] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:22,501 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:22] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:26,941 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:26] "GET /my_sales?_t=1746033323583 HTTP/1.1" 200 -
2025-04-30 20:15:27,032 INFO: Service worker requested
2025-04-30 20:15:27,034 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:27] "GET /service-worker.js?v=1746033327026 HTTP/1.1" 200 -
2025-04-30 20:15:27,054 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:27] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:27,065 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:27] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:27,088 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:27] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:27,088 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:27] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:32,234 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:32] "GET /my_sales?_t=1746033323583 HTTP/1.1" 200 -
2025-04-30 20:15:32,336 INFO: Service worker requested
2025-04-30 20:15:32,338 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:32] "GET /service-worker.js?v=1746033332332 HTTP/1.1" 200 -
2025-04-30 20:15:32,353 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:32] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:32,371 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:32] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:32,408 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:32] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:32,410 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:32] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:35,139 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:35] "GET /cart?_t=1746033333453 HTTP/1.1" 200 -
2025-04-30 20:15:35,353 INFO: Service worker requested
2025-04-30 20:15:35,354 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:35] "GET /service-worker.js?v=1746033335312 HTTP/1.1" 200 -
2025-04-30 20:15:35,387 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:35] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:35,396 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:35,438 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:35,441 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:35] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:37,305 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:37] "GET /checkout?_t=1746033336497 HTTP/1.1" 200 -
2025-04-30 20:15:37,384 INFO: Service worker requested
2025-04-30 20:15:37,386 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:37] "GET /service-worker.js?v=1746033337379 HTTP/1.1" 200 -
2025-04-30 20:15:37,418 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:37] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:37,424 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:37] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:37,460 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:37] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:37,463 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:37] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:42,956 INFO: Successfully created order 14 with direct SQL
2025-04-30 20:15:42,967 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:42] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 20:15:42,994 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:42] "GET /receipt/14 HTTP/1.1" 200 -
2025-04-30 20:15:43,039 WARNING: Unhandled path requested: favicon.ico
2025-04-30 20:15:43,041 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:43] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 20:15:44,579 INFO: Service worker requested
2025-04-30 20:15:44,580 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:44] "GET /service-worker.js?v=1746033337379 HTTP/1.1" 200 -
2025-04-30 20:15:46,890 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:46] "GET /staff/order/14 HTTP/1.1" 200 -
2025-04-30 20:15:46,983 INFO: Service worker requested
2025-04-30 20:15:46,985 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:46] "GET /service-worker.js?v=1746033346976 HTTP/1.1" 200 -
2025-04-30 20:15:47,001 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:47] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:47,003 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:47] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:47,021 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:47] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:47,056 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:47] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:48,664 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:48] "GET /?_t=1746033348108 HTTP/1.1" 200 -
2025-04-30 20:15:48,755 INFO: Service worker requested
2025-04-30 20:15:48,758 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:48] "GET /service-worker.js?v=1746033348750 HTTP/1.1" 200 -
2025-04-30 20:15:48,775 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:48,775 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:48] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:48,796 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:48] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:48,808 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:48] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:15:50,036 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:50] "GET /in_store_sale?_t=1746033349895 HTTP/1.1" 200 -
2025-04-30 20:15:50,114 INFO: Service worker requested
2025-04-30 20:15:50,116 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:50] "GET /service-worker.js?v=1746033350111 HTTP/1.1" 200 -
2025-04-30 20:15:50,153 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:50] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:50,156 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:50] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:15:50,162 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:50] "GET /api/pending_orders HTTP/1.1" 200 -
2025-04-30 20:15:50,189 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:50] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:15:50,191 INFO: 127.0.0.1 - - [30/Apr/2025 20:15:50] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:16:00,129 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:00] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:16:03,103 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:03] "GET /my_sales?_t=1746033357744 HTTP/1.1" 200 -
2025-04-30 20:16:03,187 INFO: Service worker requested
2025-04-30 20:16:03,188 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:03] "GET /service-worker.js?v=1746033363183 HTTP/1.1" 200 -
2025-04-30 20:16:03,201 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:03] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:16:03,224 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:16:03,255 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:03] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:16:03,262 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:16:06,532 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:06] "GET /?_t=1746033364300 HTTP/1.1" 200 -
2025-04-30 20:16:06,626 INFO: Service worker requested
2025-04-30 20:16:06,627 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:06] "GET /service-worker.js?v=1746033366616 HTTP/1.1" 200 -
2025-04-30 20:16:06,636 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:06] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:16:06,659 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:06] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:16:06,663 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:06] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 20:16:06,677 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:06] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 20:16:17,626 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:17] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:16:27,618 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:27] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:16:37,624 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:37] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:16:47,616 INFO: 127.0.0.1 - - [30/Apr/2025 20:16:47] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 20:16:54,787 INFO:  * Detected change in 'C:\\Users\\zex\\Documents\\POS-system1\\app.py', reloading
2025-04-30 20:16:55,121 INFO:  * Restarting with stat
2025-04-30 20:18:42,242 INFO:  * Restarting with stat
2025-04-30 20:19:03,743 INFO:  * Restarting with stat
2025-04-30 20:19:10,175 INFO:  * Restarting with stat
2025-04-30 20:20:02,547 INFO:  * Restarting with stat
2025-04-30 20:20:24,315 INFO:  * Restarting with stat
2025-04-30 20:20:40,789 INFO:  * Restarting with stat
2025-04-30 20:21:06,506 INFO:  * Restarting with stat
2025-04-30 20:21:29,297 INFO:  * Restarting with stat
2025-04-30 20:21:43,987 INFO:  * Restarting with stat
2025-04-30 20:22:57,817 INFO:  * Restarting with stat
2025-04-30 20:24:23,740 INFO:  * Restarting with stat
2025-04-30 20:24:47,339 INFO:  * Restarting with stat
2025-04-30 20:25:41,368 INFO:  * Restarting with stat
2025-04-30 20:27:09,351 INFO:  * Restarting with stat
2025-04-30 20:27:11,563 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 20:27:17,607 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:27:17,609 INFO: 127.0.0.1 - - [30/Apr/2025 20:27:17] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:27:59,519 INFO:  * Restarting with stat
2025-04-30 20:28:01,005 INFO:  * Running on http://127.0.0.1:5001/ (Press CTRL+C to quit)
2025-04-30 20:28:12,927 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:28:12,928 INFO: 127.0.0.1 - - [30/Apr/2025 20:28:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:29:12,621 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:29:12,623 INFO: 127.0.0.1 - - [30/Apr/2025 20:29:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:30:12,626 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:30:12,627 INFO: 127.0.0.1 - - [30/Apr/2025 20:30:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:30:27,615 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:30:27,616 INFO: 127.0.0.1 - - [30/Apr/2025 20:30:27] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:30:37,622 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:30:37,623 INFO: 127.0.0.1 - - [30/Apr/2025 20:30:37] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:30:47,610 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:30:47,611 INFO: 127.0.0.1 - - [30/Apr/2025 20:30:47] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:30:57,618 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:30:57,618 INFO: 127.0.0.1 - - [30/Apr/2025 20:30:57] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:31:07,615 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:31:07,616 INFO: 127.0.0.1 - - [30/Apr/2025 20:31:07] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:31:17,616 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:31:17,617 INFO: 127.0.0.1 - - [30/Apr/2025 20:31:17] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:31:38,027 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:31:38,028 INFO: 127.0.0.1 - - [30/Apr/2025 20:31:38] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:31:47,607 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:31:47,607 INFO: 127.0.0.1 - - [30/Apr/2025 20:31:47] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:31:57,618 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:31:57,619 INFO: 127.0.0.1 - - [30/Apr/2025 20:31:57] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:32:07,608 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:32:07,609 INFO: 127.0.0.1 - - [30/Apr/2025 20:32:07] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:32:17,609 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:32:17,610 INFO: 127.0.0.1 - - [30/Apr/2025 20:32:17] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:32:27,616 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:32:27,617 INFO: 127.0.0.1 - - [30/Apr/2025 20:32:27] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:32:37,606 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:32:37,607 INFO: 127.0.0.1 - - [30/Apr/2025 20:32:37] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:32:46,656 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:32:46,672 INFO: 127.0.0.1 - - [30/Apr/2025 20:32:46] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:32:57,615 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:32:57,616 INFO: 127.0.0.1 - - [30/Apr/2025 20:32:57] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:33:07,612 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:33:07,613 INFO: 127.0.0.1 - - [30/Apr/2025 20:33:07] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:33:17,609 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:33:17,609 INFO: 127.0.0.1 - - [30/Apr/2025 20:33:17] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:33:27,615 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:33:27,616 INFO: 127.0.0.1 - - [30/Apr/2025 20:33:27] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:33:37,617 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:33:37,618 INFO: 127.0.0.1 - - [30/Apr/2025 20:33:37] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:33:47,607 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:33:47,607 INFO: 127.0.0.1 - - [30/Apr/2025 20:33:47] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:34:12,615 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:34:12,616 INFO: 127.0.0.1 - - [30/Apr/2025 20:34:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:35:12,621 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:35:12,622 INFO: 127.0.0.1 - - [30/Apr/2025 20:35:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:36:12,622 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:36:12,623 INFO: 127.0.0.1 - - [30/Apr/2025 20:36:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:37:12,634 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:37:12,635 INFO: 127.0.0.1 - - [30/Apr/2025 20:37:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:38:12,622 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:38:12,624 INFO: 127.0.0.1 - - [30/Apr/2025 20:38:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:39:12,626 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:39:12,627 INFO: 127.0.0.1 - - [30/Apr/2025 20:39:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:40:12,618 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:40:12,619 INFO: 127.0.0.1 - - [30/Apr/2025 20:40:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:41:12,630 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:41:12,631 INFO: 127.0.0.1 - - [30/Apr/2025 20:41:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:42:12,622 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:42:12,623 INFO: 127.0.0.1 - - [30/Apr/2025 20:42:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:43:12,622 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:43:12,623 INFO: 127.0.0.1 - - [30/Apr/2025 20:43:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:44:12,616 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:44:12,617 INFO: 127.0.0.1 - - [30/Apr/2025 20:44:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:44:13,840 INFO:  * Restarting with stat
2025-04-30 20:44:19,987 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 20:44:20,018 INFO: 127.0.0.1 - - [30/Apr/2025 20:44:20] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 20:44:22,118 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 20:44:22,122 INFO: 127.0.0.1 - - [30/Apr/2025 20:44:22] "[35m[1mGET /?_t=1746033364300 HTTP/1.1[0m" 500 -
2025-04-30 20:44:22,163 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 20:44:22,169 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 20:44:22,218 INFO: 127.0.0.1 - - [30/Apr/2025 20:44:22] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 20:44:23,721 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 20:44:23,723 INFO: 127.0.0.1 - - [30/Apr/2025 20:44:23] "[35m[1mGET /?_t=1746033364300 HTTP/1.1[0m" 500 -
2025-04-30 20:44:23,743 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 20:44:23,755 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 20:44:23,784 INFO: 127.0.0.1 - - [30/Apr/2025 20:44:23] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:34:48,821 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 22:35:35,328 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:35] "GET /?_t=1746033364300 HTTP/1.1" 200 -
2025-04-30 22:35:35,475 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:35] "GET /static/css/style.css?v=68cc831e&t=1746041688 HTTP/1.1" 200 -
2025-04-30 22:35:35,760 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:35] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 22:35:35,763 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:35] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 22:35:35,763 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:35] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 22:35:35,766 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:35] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 22:35:35,925 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:35,927 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 22:35:35,938 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:35] "[33mGET /service-worker.js?v=1746041735919 HTTP/1.1[0m" 404 -
2025-04-30 22:35:35,939 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 22:35:38,451 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:38] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 22:35:38,453 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:38] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 22:35:38,469 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:38] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 22:35:41,749 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:41] "GET /cart?_t=1746041740469 HTTP/1.1" 200 -
2025-04-30 22:35:41,862 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:41,868 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:41] "[33mGET /service-worker.js?v=1746041741856 HTTP/1.1[0m" 404 -
2025-04-30 22:35:41,873 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 22:35:41,894 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 22:35:43,124 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:43] "GET /checkout?_t=1746041741954 HTTP/1.1" 200 -
2025-04-30 22:35:43,194 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:43,201 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:43] "[33mGET /service-worker.js?v=1746041743189 HTTP/1.1[0m" 404 -
2025-04-30 22:35:43,555 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:43,559 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:43] "[33mGET /service-worker.js?v=1746033366616 HTTP/1.1[0m" 404 -
2025-04-30 22:35:44,769 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:44,772 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:44] "[33mGET /service-worker.js?v=1746033366616 HTTP/1.1[0m" 404 -
2025-04-30 22:35:49,007 INFO: Successfully created order 15 with direct SQL
2025-04-30 22:35:49,018 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:49] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 22:35:49,053 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:49] "GET /receipt/15 HTTP/1.1" 200 -
2025-04-30 22:35:49,140 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:35:49,143 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-30 22:35:50,653 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:50,654 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:50] "[33mGET /service-worker.js?v=1746033366616 HTTP/1.1[0m" 404 -
2025-04-30 22:35:54,627 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:54] "GET / HTTP/1.1" 200 -
2025-04-30 22:35:54,706 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:54,707 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:54] "[33mGET /service-worker.js?v=1746041754693 HTTP/1.1[0m" 404 -
2025-04-30 22:35:56,287 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:56,291 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:56] "[33mGET /service-worker.js?v=1746033366616 HTTP/1.1[0m" 404 -
2025-04-30 22:35:57,941 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:57] "GET /login?_t=1746041754758 HTTP/1.1" 200 -
2025-04-30 22:35:57,998 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:58,000 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:58] "[33mGET /service-worker.js?v=1746041757993 HTTP/1.1[0m" 404 -
2025-04-30 22:35:59,607 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:35:59,613 INFO: 127.0.0.1 - - [30/Apr/2025 22:35:59] "[33mGET /service-worker.js?v=1746033366616 HTTP/1.1[0m" 404 -
2025-04-30 22:36:07,445 INFO: 127.0.0.1 - - [30/Apr/2025 22:36:07] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-30 22:36:07,464 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:36:07,468 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:36:07,475 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:36:07,492 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:07,495 ERROR: Unhandled Exception: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:07,497 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:07,499 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 478, in top-level template code
    <a class="nav-link" href="{{ url_for('in_store_sale') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 478, in top-level template code
    <a class="nav-link" href="{{ url_for('in_store_sale') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:36:07,534 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:36:07,539 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:07,568 INFO: 127.0.0.1 - - [30/Apr/2025 22:36:07] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:36:07,614 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 478, in top-level template code
    <a class="nav-link" href="{{ url_for('in_store_sale') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 478, in top-level template code
    <a class="nav-link" href="{{ url_for('in_store_sale') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:36:09,136 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:36:09,139 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:09,140 ERROR: Exception on /service-worker.js [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:36:09,148 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:36:09,151 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:09,157 INFO: 127.0.0.1 - - [30/Apr/2025 22:36:09] "[35m[1mGET /service-worker.js?v=1746033366616 HTTP/1.1[0m" 500 -
2025-04-30 22:36:09,168 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:36:12,832 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:36:12,836 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:36:12,841 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:36:12,847 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:12,849 ERROR: Unhandled Exception: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:12,851 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:12,853 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 478, in top-level template code
    <a class="nav-link" href="{{ url_for('in_store_sale') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 478, in top-level template code
    <a class="nav-link" href="{{ url_for('in_store_sale') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:36:12,871 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:36:12,874 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:12,888 INFO: 127.0.0.1 - - [30/Apr/2025 22:36:12] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:36:12,917 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:36:12,921 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:12,922 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:36:12,928 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 478, in top-level template code
    <a class="nav-link" href="{{ url_for('in_store_sale') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 478, in top-level template code
    <a class="nav-link" href="{{ url_for('in_store_sale') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:36:12,929 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:36:12,942 ERROR: Template rendering error: Could not build url for endpoint 'in_store_sale'. Did you mean 'inventory_management' instead?
2025-04-30 22:36:12,950 INFO: 127.0.0.1 - - [30/Apr/2025 22:36:12] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:36:12,958 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:38:36,100 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 22:43:25,388 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:43:25,392 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:43:25,399 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:43:25,437 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:25,438 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:25,441 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:25,442 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:43:25,465 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:43:25,469 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:25,489 INFO: 127.0.0.1 - - [30/Apr/2025 22:43:25] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:43:25,538 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:43:25,545 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:25,546 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:43:25,549 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:43:25,557 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:43:25,588 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:25,601 INFO: 127.0.0.1 - - [30/Apr/2025 22:43:25] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:43:25,613 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:43:27,093 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:43:27,097 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:43:27,100 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:43:27,103 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:27,105 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:27,106 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:27,107 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:43:27,123 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:43:27,126 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:27,147 INFO: 127.0.0.1 - - [30/Apr/2025 22:43:27] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:43:27,199 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:43:27,205 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:43:27,228 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:27,229 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:43:27,236 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:43:27,239 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:43:27,246 INFO: 127.0.0.1 - - [30/Apr/2025 22:43:27] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:43:27,254 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:50,371 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:50,376 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:50,378 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:50,381 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:50,383 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:50,385 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:50,386 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:50,404 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:50,408 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:50,425 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:50] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:50,480 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:50,485 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:50,487 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:50,496 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:50,501 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:50,513 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:50] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:50,534 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:50,536 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:51,653 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:51,655 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:51,660 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:51,664 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,666 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,668 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,668 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:51,686 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:51,691 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,702 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:51] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:51,751 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:51,757 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,764 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:51,771 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:51,777 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,780 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:51,785 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:51] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:51,801 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:51,847 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:51,850 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:51,852 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:51,857 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,859 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,860 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,861 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:51,878 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:51,882 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,894 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:51] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:51,942 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:51,961 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:51,966 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,967 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:51,975 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:51,980 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:51,986 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:51] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:51,999 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,028 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,030 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,036 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,041 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,042 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,043 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,044 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,061 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,064 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,075 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,121 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:52,128 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,130 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,134 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,137 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,141 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,160 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,170 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,186 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,191 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,194 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,198 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,199 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,200 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,201 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,218 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,221 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,234 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,291 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:52,300 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,302 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,311 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,312 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,315 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,343 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,346 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,349 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,350 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,357 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,360 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,363 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,369 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,370 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,386 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,396 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,409 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,453 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:52,462 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,465 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,470 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,480 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,495 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,501 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,512 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,582 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,584 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,591 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,595 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,596 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,598 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,599 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,614 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,617 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,630 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,669 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,684 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:52,687 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,690 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,696 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,700 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,710 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,719 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,812 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,815 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,817 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:52,820 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,823 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,825 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,826 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,844 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,847 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,859 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,912 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:52,924 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,926 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,932 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:52,933 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:52,935 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:52,952 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:52] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:52,963 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,202 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,212 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,218 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,230 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,235 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,243 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,247 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,284 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:53,288 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,303 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:53] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:53,337 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,342 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,346 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,349 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,351 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,353 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,354 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,360 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,373 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:53,386 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,398 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:53] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:53,415 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:53,425 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,430 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,442 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:53,445 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,452 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:53] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:53,462 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,499 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:53,507 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,514 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,516 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,518 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,518 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,524 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:53,531 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,544 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,549 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,550 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,552 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,553 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,571 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:53] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:53,574 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:53,594 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,614 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,625 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:53] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:53,769 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,769 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:53,776 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,779 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,784 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,786 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,787 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,790 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,792 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,794 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,794 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,810 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:53,813 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:53,837 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,840 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,848 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:53] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:53,859 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,862 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:53] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:53,912 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,928 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:53,932 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,934 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,934 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,942 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:53,945 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,952 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,954 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:53,961 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,962 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,964 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,965 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:53,974 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:53] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:53,981 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:53,991 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:53,997 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,008 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:54] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:54,060 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,061 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:54,082 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,083 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,087 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:54,093 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:54,099 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:54,100 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,103 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:54,109 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,111 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,112 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,116 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,117 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:54] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:54,133 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:54,140 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,151 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,163 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:54] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:54,219 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:54,227 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,230 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,231 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,232 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:54,236 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:54,252 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:54,254 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,258 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:54,262 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,264 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,265 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,266 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,275 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:54] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:54,282 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:54,287 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,303 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,311 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:54] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:54,367 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,369 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:54,384 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,391 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,392 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:54,397 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:54,400 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:54,402 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,404 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:48:54,409 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,410 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,412 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,413 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,420 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:54] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:54,430 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:54,436 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,446 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,458 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:54] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:48:54,492 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,530 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:48:54,534 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,535 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:48:54,544 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:48:54,547 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:48:54,553 INFO: 127.0.0.1 - - [30/Apr/2025 22:48:54] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:48:54,567 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,474 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:42,477 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:42,480 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:42,517 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,518 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,521 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,522 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,539 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:42,542 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,556 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:42] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:51:42,598 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,662 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:42,666 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,667 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,674 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:42,678 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,685 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:42] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:42,694 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,722 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:42,725 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:42,728 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:42,731 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,732 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,734 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,735 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,754 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:42,758 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,773 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:42] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:51:42,818 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:42,826 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,832 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,841 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:42,844 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,848 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,852 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:42] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:42,868 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,897 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:42,899 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:42,902 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:42,907 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,909 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,910 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,911 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,927 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:42,930 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:42,942 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:42] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:51:42,976 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:42,997 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:43,004 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:43,006 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:43,012 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:43,017 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:43,026 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:43] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:43,036 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:43,051 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:43,055 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:43,058 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:43,065 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:43,067 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:43,068 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:43,070 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:43,087 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:43,091 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:43,102 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:43] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:51:43,161 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:43,162 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:43,177 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:43,178 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:43,183 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:43,188 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:43,196 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:43] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:43,204 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:44,772 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:44] "[32mGET /login?_t=1746041754758 HTTP/1.1[0m" 302 -
2025-04-30 22:51:44,834 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:44,840 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:44,842 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:44,848 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:44,852 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:44,862 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:44] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:44,872 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:46,377 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:51:46,383 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:46,389 ERROR: Exception on /service-worker.js [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:46,401 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:46,407 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:46,415 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:46] "[35m[1mGET /service-worker.js?v=1746033366616 HTTP/1.1[0m" 500 -
2025-04-30 22:51:46,426 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:46,548 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:46,550 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:46] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-04-30 22:51:46,613 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:46,617 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:46,618 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:46,628 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:46,632 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:46,647 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:46] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:46,657 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:47,533 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:47,538 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:47,539 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:47,546 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:47,553 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:47,563 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:47] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:47,573 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:47,950 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:47,955 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:47,956 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:47,964 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:47,968 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:47,977 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:47] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:47,985 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:48,191 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:51:48,198 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:48,200 ERROR: Exception on /service-worker.js [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:48,228 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:48,234 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:48,258 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:48] "[35m[1mGET /service-worker.js?v=1746033366616 HTTP/1.1[0m" 500 -
2025-04-30 22:51:48,279 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:49,513 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /service-worker.js
2025-04-30 22:51:49,520 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:49,523 ERROR: Exception on /service-worker.js [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:49,536 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:49,542 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:49,550 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:49] "[35m[1mGET /service-worker.js?v=1746033366616 HTTP/1.1[0m" 500 -
2025-04-30 22:51:49,559 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,295 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:50,298 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:50,300 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:50,307 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,309 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,310 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,311 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,328 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:50,331 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,345 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:50] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:51:50,399 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:50,406 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,410 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,416 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:50,422 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,428 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,431 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:50] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:50,448 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,563 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:50,566 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:50,573 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:50,598 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,599 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,601 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,603 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,618 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:50,623 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,633 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:50] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:51:50,694 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:50,696 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:50,699 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:50,701 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,704 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:51:50,708 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,709 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,713 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,726 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:50,728 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,730 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,731 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,734 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,749 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:50,754 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,760 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:50] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:50,772 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,774 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:50] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:51:50,817 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,841 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /favicon.ico
2025-04-30 22:51:50,848 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,850 ERROR: Exception on /favicon.ico [GET]
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:51:50,875 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:51:50,879 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:51:50,886 INFO: 127.0.0.1 - - [30/Apr/2025 22:51:50] "[35m[1mGET /favicon.ico HTTP/1.1[0m" 500 -
2025-04-30 22:51:50,895 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1489, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1471, in raise_routing_exception
    raise request.routing_exception  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\ctx.py", line 367, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2032, in match
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:04,517 INFO:  * Running on http://127.0.0.1:5001/ (Press CTRL+C to quit)
2025-04-30 22:55:16,855 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:16,857 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:16,862 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:16,898 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:16,899 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:16,903 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:16,904 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:16,914 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:55:16,917 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:16,944 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:16] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:55:17,004 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:17,050 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:17] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 22:55:18,556 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:18] "GET /service-worker.js?v=1746032288190 HTTP/1.1" 200 -
2025-04-30 22:55:22,950 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:22,952 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:22,955 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:22,958 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:22,959 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:22,960 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:22,962 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:22,968 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:55:22,970 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:22,981 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:22] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:55:23,037 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:23] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 22:55:23,043 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:23,798 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:23,807 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:23,808 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:23,810 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:23,814 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:23,816 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:23,817 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:23,822 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:55:23,825 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:23,835 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:23] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:55:23,883 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:23] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 22:55:23,888 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:24,008 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:24,009 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:24,011 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:24,015 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:24,017 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:24,018 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:24,022 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:24,029 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:55:24,032 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:24,040 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:24] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:55:24,085 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:24,087 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:24] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 22:55:24,174 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:24,175 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:24,178 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:55:24,181 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:24,183 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:24,185 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:24,186 ERROR: Exception on /staff_dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=recent_orders,
                          pending_orders=pending_orders,
                          order_counts=order_counts)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
                          recent_orders=[],
                          pending_orders=[],
                          order_counts={'pending': 0, 'processing': 0, 'completed': 0},
                          error=str(e))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
        ctx.app.jinja_env.get_or_select_template(template_name_or_list),
        context,
        ctx.app,
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
    
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
        endpoint, values, method=method, force_external=external
    )
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                              ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
    ...<4 lines>...
    )
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:24,192 ERROR: Server Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-04-30 22:55:24,197 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:55:24,207 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:24] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:55:24,242 ERROR: Error on request:
Traceback (most recent call last):
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1493, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1513, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1499, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_login\utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 68, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\zex\Documents\POS-system1\app.py", line 1500, in staff_dashboard
    return render_template('staff/dashboard.html',
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 147, in render_template
    return _render(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\templating.py", line 128, in _render
    rv = template.render(context)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\zex\Documents\POS-system1\templates\staff\dashboard.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\zex\Documents\POS-system1\templates\base.html", line 483, in top-level template code
    <a class="nav-link" href="{{ url_for('my_sales') }}">
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 338, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\helpers.py", line 325, in url_for
    rv = url_adapter.build(
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\routing.py", line 2305, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2070, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1515, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 319, in run_wsgi
    execute(self.server.app)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\werkzeug\serving.py", line 308, in execute
    application_iter = app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2088, in __call__
    return self.wsgi_app(environ, start_response)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1439, in handle_exception
    return self.finalize_request(server_error, from_error_handler=True)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1535, in finalize_request
    response = self.make_response(rv)
  File "C:\Users\zex\AppData\Roaming\Python\Python313\site-packages\flask\app.py", line 1727, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a tuple.
2025-04-30 22:55:24,255 INFO: 127.0.0.1 - - [30/Apr/2025 22:55:24] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 22:57:48,420 INFO:  * Restarting with stat
2025-04-30 22:57:50,188 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 22:58:07,101 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:58:07,104 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:58:07,112 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 22:58:07,153 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:58:07,155 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:58:07,161 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 22:58:07,247 INFO: 127.0.0.1 - - [30/Apr/2025 22:58:07] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 22:58:07,389 INFO: 127.0.0.1 - - [30/Apr/2025 22:58:07] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-30 22:58:07,405 INFO: 127.0.0.1 - - [30/Apr/2025 22:58:07] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-30 22:58:07,443 INFO: 127.0.0.1 - - [30/Apr/2025 22:58:07] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=ubuntu.ttf HTTP/1.1" 200 -
2025-04-30 22:58:07,486 INFO: 127.0.0.1 - - [30/Apr/2025 22:58:07] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-30 22:58:09,097 INFO: 127.0.0.1 - - [30/Apr/2025 22:58:09] "GET /service-worker.js?v=1746033366616 HTTP/1.1" 200 -
2025-04-30 23:02:52,743 INFO:  * Restarting with stat
2025-04-30 23:02:54,162 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 23:03:02,896 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:03:02,900 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:03:02,906 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:03:03,000 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 23:03:03,002 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 23:03:03,005 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 23:03:03,137 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:03] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 23:03:03,296 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:03] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-30 23:03:03,299 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:03] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-30 23:03:03,330 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:03] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=ubuntu.ttf HTTP/1.1" 200 -
2025-04-30 23:03:03,352 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:03] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-30 23:03:03,399 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:03] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-30 23:03:05,335 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:03:05,339 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:03:05,345 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:03:05,349 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 23:03:05,357 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 23:03:05,361 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 23:03:05,443 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:05] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 23:03:05,499 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:05] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-30 23:03:05,505 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:05] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-30 23:03:05,527 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:05] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=ubuntu.ttf HTTP/1.1" 200 -
2025-04-30 23:03:05,549 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:05] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-30 23:03:05,589 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:05] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-30 23:03:10,252 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:03:10,256 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:03:10,260 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:03:10,264 ERROR: Critical error in staff_dashboard: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 23:03:10,266 ERROR: Unhandled Exception: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 23:03:10,267 ERROR: Template rendering error: Could not build url for endpoint 'my_sales'. Did you mean 'in_store_sale' instead?
2025-04-30 23:03:10,348 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:10] "[35m[1mGET /staff_dashboard HTTP/1.1[0m" 500 -
2025-04-30 23:03:10,404 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:10] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-30 23:03:10,414 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:10] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-30 23:03:10,431 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:10] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=ubuntu.ttf HTTP/1.1" 200 -
2025-04-30 23:03:10,454 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:10] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-30 23:03:10,504 INFO: 127.0.0.1 - - [30/Apr/2025 23:03:10] "GET /staff_dashboard?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-30 23:05:57,677 INFO:  * Restarting with stat
2025-04-30 23:05:59,247 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 23:06:02,916 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:06:02,919 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:06:02,927 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:06:02,969 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:02] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:06:03,229 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 23:06:03,233 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-04-30 23:06:03,257 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 23:06:03,246 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 23:06:03,248 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 23:06:03,245 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 23:06:03,419 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 23:06:03,465 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /service-worker.js?v=1746043563424 HTTP/1.1" 200 -
2025-04-30 23:06:03,483 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:03,516 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:03,518 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:06:03,552 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:03,552 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-04-30 23:06:03,600 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:03] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:06:12,343 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:12] "GET /cart?_t=1746043563567 HTTP/1.1" 200 -
2025-04-30 23:06:12,429 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:12] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 23:06:12,479 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:12,476 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:12] "GET /service-worker.js?v=1746043572439 HTTP/1.1" 200 -
2025-04-30 23:06:12,481 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:12] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:06:12,527 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:12] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:06:15,932 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:15] "GET /cart?_t=1746043563567 HTTP/1.1" 200 -
2025-04-30 23:06:15,981 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:15] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-04-30 23:06:15,988 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:15] "GET /static/js/cart.js HTTP/1.1" 200 -
2025-04-30 23:06:15,996 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:15] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 23:06:15,997 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:15] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 23:06:15,999 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:15] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 23:06:16,001 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:16] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 23:06:16,003 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:16] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 23:06:16,161 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:16] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 23:06:16,177 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:16] "GET /service-worker.js?v=1746043576149 HTTP/1.1" 200 -
2025-04-30 23:06:16,194 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:16,196 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:16] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:06:16,198 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:16] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:16,208 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:16] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:16,239 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:16] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:06:18,400 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:18] "GET /?_t=1746043577273 HTTP/1.1" 200 -
2025-04-30 23:06:18,442 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:18] "GET /static/css/style.css?v=2ca662ea&t=1746043559 HTTP/1.1" 200 -
2025-04-30 23:06:18,533 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:18,533 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:18] "GET /service-worker.js?v=1746043578510 HTTP/1.1" 200 -
2025-04-30 23:06:18,534 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:18] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:06:18,539 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:18] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:18,577 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:18] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:18,610 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:18] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:06:20,021 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:20] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:06:20,029 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:20] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:06:20,046 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:20] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:23,038 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:23] "GET /cart?_t=1746043582047 HTTP/1.1" 200 -
2025-04-30 23:06:23,163 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:23] "GET /service-worker.js?v=1746043583144 HTTP/1.1" 200 -
2025-04-30 23:06:23,164 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:23,166 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:23] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:06:23,210 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:23] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:06:25,457 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:25] "GET /checkout?_t=1746043584265 HTTP/1.1" 200 -
2025-04-30 23:06:25,565 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:25] "GET /service-worker.js?v=1746043585558 HTTP/1.1" 200 -
2025-04-30 23:06:25,580 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:25,595 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:25] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:06:25,611 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:25,626 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:25] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:06:25,675 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:30,326 INFO: Successfully created order 16 with direct SQL
2025-04-30 23:06:30,336 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:30] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 23:06:30,369 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:30] "GET /receipt/16 HTTP/1.1" 200 -
2025-04-30 23:06:30,422 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:30] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 23:06:31,940 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:31] "GET /service-worker.js?v=1746043585558 HTTP/1.1" 200 -
2025-04-30 23:06:32,252 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:32] "GET /staff/order/16 HTTP/1.1" 200 -
2025-04-30 23:06:32,344 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:32] "GET /service-worker.js?v=1746043592337 HTTP/1.1" 200 -
2025-04-30 23:06:32,362 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:32,371 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:32] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:06:32,379 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:32] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:32,407 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:32] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:32,459 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:32] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:06:34,976 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:34] "GET /?_t=1746043593502 HTTP/1.1" 200 -
2025-04-30 23:06:35,099 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:35] "GET /service-worker.js?v=1746043595090 HTTP/1.1" 200 -
2025-04-30 23:06:35,120 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:35,124 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:35] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:06:35,124 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:35,145 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:35,157 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:35] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:06:42,521 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:42] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:06:42,545 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:42] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:06:42,561 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:42] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:06:45,100 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:45,102 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:45] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:06:55,545 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:06:55,546 INFO: 127.0.0.1 - - [30/Apr/2025 23:06:55] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:07:05,558 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:07:05,559 INFO: 127.0.0.1 - - [30/Apr/2025 23:07:05] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:07:15,553 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:07:15,554 INFO: 127.0.0.1 - - [30/Apr/2025 23:07:15] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:13:13,217 INFO:  * Restarting with stat
2025-04-30 23:13:14,816 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 23:13:15,614 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:13:15,618 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:15] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:13:18,207 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /?_t=1746043593502 HTTP/1.1" 200 -
2025-04-30 23:13:18,309 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /static/css/style.css?v=9ba418c8&t=1746043994 HTTP/1.1" 200 -
2025-04-30 23:13:18,719 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 23:13:18,729 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 23:13:18,732 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 23:13:18,735 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 23:13:18,740 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 23:13:18,947 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 23:13:18,952 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /service-worker.js?v=1746043998939 HTTP/1.1" 200 -
2025-04-30 23:13:18,964 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:13:18,965 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:13:18,980 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-04-30 23:13:18,986 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:18,993 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:18] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:19,041 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:19] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:13:21,179 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:21] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:13:21,184 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:21] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:13:21,203 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:21] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:23,025 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:23] "GET /cart?_t=1746044001213 HTTP/1.1" 200 -
2025-04-30 23:13:23,130 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:23] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 23:13:23,150 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:13:23,152 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:23] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:13:23,156 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:23] "GET /service-worker.js?v=1746044003130 HTTP/1.1" 200 -
2025-04-30 23:13:23,208 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:23] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:13:27,446 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:27] "GET /checkout?_t=1746044004297 HTTP/1.1" 200 -
2025-04-30 23:13:27,494 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:27] "GET /static/js/checkout.js HTTP/1.1" 200 -
2025-04-30 23:13:27,579 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:27] "GET /service-worker.js?v=1746044007558 HTTP/1.1" 200 -
2025-04-30 23:13:27,581 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:13:27,592 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:27] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:13:27,595 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:27] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:27,633 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:27] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:27,664 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:27] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:13:30,909 INFO: Successfully created order 17 with direct SQL
2025-04-30 23:13:30,917 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:30] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 23:13:30,946 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:30] "GET /receipt/17 HTTP/1.1" 200 -
2025-04-30 23:13:31,000 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:31] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 23:13:32,507 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:32] "GET /service-worker.js?v=1746044007558 HTTP/1.1" 200 -
2025-04-30 23:13:35,965 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:35] "GET /staff/order/17 HTTP/1.1" 200 -
2025-04-30 23:13:36,082 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:36] "GET /service-worker.js?v=1746044016071 HTTP/1.1" 200 -
2025-04-30 23:13:36,097 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:13:36,099 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:36] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:13:36,108 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:36] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:36,130 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:36] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:36,171 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:36] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:13:37,253 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:37] "GET /?_t=1746044017221 HTTP/1.1" 200 -
2025-04-30 23:13:37,372 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:37] "GET /service-worker.js?v=1746044017360 HTTP/1.1" 200 -
2025-04-30 23:13:37,404 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:13:37,405 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:37] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:37,419 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:37] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:13:37,444 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:37] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:13:37,450 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:37] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:39,541 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:39] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:13:39,550 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:13:39,564 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:39] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:13:42,393 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:42] "GET /cart?_t=1746044021575 HTTP/1.1" 200 -
2025-04-30 23:13:42,528 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:42] "GET /service-worker.js?v=1746044022498 HTTP/1.1" 200 -
2025-04-30 23:13:42,545 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:13:42,556 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:42] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:13:42,590 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:42] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:13:51,390 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /update_cart/34
2025-04-30 23:13:51,396 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:51] "[33mPOST /update_cart/34 HTTP/1.1[0m" 404 -
2025-04-30 23:13:52,864 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:13:52,865 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:52] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:13:57,512 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /update_cart/34
2025-04-30 23:13:57,518 INFO: 127.0.0.1 - - [30/Apr/2025 23:13:57] "[33mPOST /update_cart/34 HTTP/1.1[0m" 404 -
2025-04-30 23:14:02,512 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:14:02,513 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:02] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:14:03,459 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:03] "GET /?_t=1746044023660 HTTP/1.1" 200 -
2025-04-30 23:14:03,578 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:03] "GET /service-worker.js?v=1746044043574 HTTP/1.1" 200 -
2025-04-30 23:14:03,593 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:14:03,600 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:03] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:14:03,605 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:14:03,637 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:14:03,638 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:03] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:14:04,768 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:04] "GET /cart?_t=1746044043700 HTTP/1.1" 200 -
2025-04-30 23:14:04,874 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:04] "GET /service-worker.js?v=1746044044862 HTTP/1.1" 200 -
2025-04-30 23:14:04,885 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:04] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:14:04,895 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:14:04,906 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:04] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:14:04,912 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:04] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:14:04,942 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:04] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:14:14,742 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:14] "GET /cart?_t=1746044043700 HTTP/1.1" 200 -
2025-04-30 23:14:14,832 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:14] "GET /service-worker.js?v=1746044054822 HTTP/1.1" 200 -
2025-04-30 23:14:14,854 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:14:14,858 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:14] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:14:14,860 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:14] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:14:14,891 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:14] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:14:14,899 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:14] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:14:17,139 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:17] "GET /?_t=1746044055980 HTTP/1.1" 200 -
2025-04-30 23:14:17,396 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:17] "GET /service-worker.js?v=1746044057382 HTTP/1.1" 200 -
2025-04-30 23:14:17,504 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:17] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:14:17,543 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:14:17,557 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:17] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:14:17,576 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:17] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:14:17,582 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:17] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:14:27,551 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:14:27,552 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:27] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:14:37,554 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:14:37,555 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:37] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:14:47,549 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:14:47,550 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:47] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:14:57,550 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:14:57,551 INFO: 127.0.0.1 - - [30/Apr/2025 23:14:57] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:15:07,552 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:15:07,553 INFO: 127.0.0.1 - - [30/Apr/2025 23:15:07] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:15:17,566 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:15:17,568 INFO: 127.0.0.1 - - [30/Apr/2025 23:15:17] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:15:27,554 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:15:27,557 INFO: 127.0.0.1 - - [30/Apr/2025 23:15:27] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:15:37,546 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:15:37,547 INFO: 127.0.0.1 - - [30/Apr/2025 23:15:37] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:15:47,562 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/check_new_orders
2025-04-30 23:15:47,563 INFO: 127.0.0.1 - - [30/Apr/2025 23:15:47] "[33mGET /api/check_new_orders HTTP/1.1[0m" 404 -
2025-04-30 23:39:31,724 INFO:  * Restarting with stat
2025-04-30 23:39:33,749 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 23:39:40,614 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:40] "GET /?_t=1746044055980 HTTP/1.1" 200 -
2025-04-30 23:39:40,717 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:40] "GET /static/css/style.css?v=4d6240bb&t=1746045573 HTTP/1.1" 200 -
2025-04-30 23:39:40,914 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:40] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 23:39:40,915 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:40] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 23:39:40,916 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:40] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 23:39:40,917 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:40] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 23:39:41,031 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:39:41,032 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:41] "GET /service-worker.js?v=1746045581021 HTTP/1.1" 200 -
2025-04-30 23:39:41,036 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:39:41,087 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:41] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:39:43,778 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:43] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:39:43,785 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:43] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:39:43,798 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:39:45,744 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:45] "GET /cart?_t=1746045583804 HTTP/1.1" 200 -
2025-04-30 23:39:45,852 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:45] "GET /service-worker.js?v=1746045585845 HTTP/1.1" 200 -
2025-04-30 23:39:45,870 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:39:45,908 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:45] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:39:45,911 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:39:53,817 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:53] "GET /checkout?_t=1746045586962 HTTP/1.1" 200 -
2025-04-30 23:39:53,918 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:53] "GET /service-worker.js?v=1746045593912 HTTP/1.1" 200 -
2025-04-30 23:39:53,949 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:53] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:39:53,973 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:53] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:39:53,976 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:53] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:39:58,700 INFO: Successfully created order 18 with direct SQL
2025-04-30 23:39:58,710 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:58] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 23:39:58,739 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:58] "GET /receipt/18 HTTP/1.1" 200 -
2025-04-30 23:39:58,802 INFO: 127.0.0.1 - - [30/Apr/2025 23:39:58] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 23:40:00,186 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:00] "GET / HTTP/1.1" 200 -
2025-04-30 23:40:00,279 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:00] "GET /service-worker.js?v=1746045600271 HTTP/1.1" 200 -
2025-04-30 23:40:00,291 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:00] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:00,311 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:00] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:00,314 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:00] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:40:00,386 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:00] "GET /service-worker.js?v=1746045600271 HTTP/1.1" 200 -
2025-04-30 23:40:01,748 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:01] "GET /?_t=1746045601389 HTTP/1.1" 200 -
2025-04-30 23:40:01,847 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:01] "GET /service-worker.js?v=1746045601842 HTTP/1.1" 200 -
2025-04-30 23:40:01,864 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:01] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:01,880 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:01] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:01,891 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:01] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:40:04,512 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:04] "GET /login?_t=1746045602955 HTTP/1.1" 200 -
2025-04-30 23:40:04,607 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:04] "GET /service-worker.js?v=1746045604594 HTTP/1.1" 200 -
2025-04-30 23:40:04,624 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:04] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:04,647 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:04] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:04,666 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:04] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:40:15,976 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:15] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-30 23:40:15,996 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:40:15,999 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:40:16,006 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:40:16,024 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:16] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:40:16,194 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:16] "GET /service-worker.js?v=1746045616172 HTTP/1.1" 200 -
2025-04-30 23:40:16,208 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:16] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:16,209 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:16] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:40:16,258 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:16] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:16,273 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:16] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:40:19,848 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:19] "GET /cart?_t=1746045617344 HTTP/1.1" 200 -
2025-04-30 23:40:19,948 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:19] "GET /service-worker.js?v=1746045619941 HTTP/1.1" 200 -
2025-04-30 23:40:19,972 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:19] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:19,981 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:19] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:40:20,011 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:20] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:20,012 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:20] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:40:25,168 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /update_cart/34
2025-04-30 23:40:25,176 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:25] "[33mPOST /update_cart/34 HTTP/1.1[0m" 404 -
2025-04-30 23:40:29,951 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:29] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:40:30,515 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:30] "GET /checkout?_t=1746045621084 HTTP/1.1" 200 -
2025-04-30 23:40:30,674 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:30] "GET /service-worker.js?v=1746045630669 HTTP/1.1" 200 -
2025-04-30 23:40:30,690 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:30] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:40:30,696 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:30] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:30,731 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:30] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:30,761 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:30] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:40:34,235 INFO: Order submission time: 35.527078 seconds
2025-04-30 23:40:34,243 INFO: Successfully created order 19 with direct SQL
2025-04-30 23:40:34,251 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:34] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 23:40:34,272 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:34] "GET /receipt/19 HTTP/1.1" 200 -
2025-04-30 23:40:34,319 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:34] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 23:40:35,476 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:35] "GET /staff/order/19 HTTP/1.1" 200 -
2025-04-30 23:40:35,571 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:35] "GET /service-worker.js?v=1746045635564 HTTP/1.1" 200 -
2025-04-30 23:40:35,610 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:35,630 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:35] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:40:35,661 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:35] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:40:35,696 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:45,579 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:45] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:40:49,585 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:49] "GET /?_t=1746045636718 HTTP/1.1" 200 -
2025-04-30 23:40:49,689 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:49] "GET /service-worker.js?v=1746045649676 HTTP/1.1" 200 -
2025-04-30 23:40:49,711 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:49] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:49,713 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:49] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:40:49,743 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:49] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:49,745 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:49] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:40:51,877 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:51] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:40:51,892 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:51] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:51,902 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:51] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:40:53,799 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:53] "GET /cart?_t=1746045651907 HTTP/1.1" 200 -
2025-04-30 23:40:53,897 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:53] "GET /service-worker.js?v=1746045653887 HTTP/1.1" 200 -
2025-04-30 23:40:53,919 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:53] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:40:53,947 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:53] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:40:55,841 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:55] "GET /checkout?_t=1746045655024 HTTP/1.1" 200 -
2025-04-30 23:40:55,935 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:55,951 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:55] "GET /service-worker.js?v=1746045655919 HTTP/1.1" 200 -
2025-04-30 23:40:55,956 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:55] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:40:55,962 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:40:56,022 INFO: 127.0.0.1 - - [30/Apr/2025 23:40:56] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:00,770 INFO: Order submission time: 26.521334 seconds
2025-04-30 23:41:00,777 INFO: Successfully created order 20 with direct SQL
2025-04-30 23:41:00,794 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:00] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 23:41:00,818 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:00] "GET /receipt/20 HTTP/1.1" 200 -
2025-04-30 23:41:00,866 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:00] "GET /favicon.ico HTTP/1.1" 200 -
2025-04-30 23:41:01,887 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:01] "GET /staff/order/20 HTTP/1.1" 200 -
2025-04-30 23:41:01,995 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:01] "GET /service-worker.js?v=1746045661982 HTTP/1.1" 200 -
2025-04-30 23:41:02,021 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:02] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:02,025 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:02] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:02,074 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:02] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:02,075 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:02] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:12,007 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:12,824 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:12] "[32mPOST /staff/update_order_status/20 HTTP/1.1[0m" 302 -
2025-04-30 23:41:12,849 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:12] "GET /staff/order/20 HTTP/1.1" 200 -
2025-04-30 23:41:13,038 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:13] "GET /service-worker.js?v=1746045673015 HTTP/1.1" 200 -
2025-04-30 23:41:13,058 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:13] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:13,068 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:13] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:13,108 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:13] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:13,120 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:13] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:16,833 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:16] "GET /cart?_t=1746045674175 HTTP/1.1" 200 -
2025-04-30 23:41:16,936 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:16] "GET /service-worker.js?v=1746045676931 HTTP/1.1" 200 -
2025-04-30 23:41:16,961 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:16] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:16,972 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:16] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:16,984 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:16] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:17,002 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:17] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:19,964 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:19] "GET /in_store_sale?_t=1746045678062 HTTP/1.1" 200 -
2025-04-30 23:41:20,017 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:20] "GET /static/js/in_store_sale.js HTTP/1.1" 200 -
2025-04-30 23:41:20,170 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/pending_orders
2025-04-30 23:41:20,172 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:20] "GET /service-worker.js?v=1746045680147 HTTP/1.1" 200 -
2025-04-30 23:41:20,175 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:20] "[33mGET /api/pending_orders HTTP/1.1[0m" 404 -
2025-04-30 23:41:20,182 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:20] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:20,184 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:20] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:20,220 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:20] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:20,242 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:20] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:21,786 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:21] "GET /service-worker.js?v=1746045680147 HTTP/1.1" 200 -
2025-04-30 23:41:30,172 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:30] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:32,140 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:32] "GET /cart?_t=1746045680225 HTTP/1.1" 200 -
2025-04-30 23:41:32,236 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:32] "GET /service-worker.js?v=1746045692230 HTTP/1.1" 200 -
2025-04-30 23:41:32,245 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:32] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:32,272 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:32] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:35,898 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:35] "GET /?_t=1746045693327 HTTP/1.1" 200 -
2025-04-30 23:41:36,008 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:36] "GET /service-worker.js?v=1746045695992 HTTP/1.1" 200 -
2025-04-30 23:41:36,022 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:36] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:36,041 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:36] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:36,052 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:36] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:36,073 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:36] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:37,302 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:37] "GET /in_store_sale?_t=1746045697145 HTTP/1.1" 200 -
2025-04-30 23:41:37,407 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:37] "GET /service-worker.js?v=1746045697402 HTTP/1.1" 200 -
2025-04-30 23:41:37,439 WARNING: 404 error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. - Path: /api/pending_orders
2025-04-30 23:41:37,447 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:37] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:37,448 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:37] "[33mGET /api/pending_orders HTTP/1.1[0m" 404 -
2025-04-30 23:41:37,500 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:37] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:37,502 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:37] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:37,503 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:37] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:39,648 ERROR: Error in my_sales: Could not build url for endpoint 'staff_orders'. Did you mean 'all_staff_orders' instead?
2025-04-30 23:41:39,650 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:39] "[32mGET /my_sales?_t=1746045698552 HTTP/1.1[0m" 302 -
2025-04-30 23:41:39,667 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:39,670 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:39,673 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:39,682 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:39] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:41:39,796 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:39] "GET /service-worker.js?v=1746045699783 HTTP/1.1" 200 -
2025-04-30 23:41:39,807 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:39,815 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:39] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:39,848 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:39,880 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:39] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:49,798 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:49] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:51,162 ERROR: Error in all_staff_orders: Could not build url for endpoint 'staff_orders'. Did you mean 'all_staff_orders' instead?
2025-04-30 23:41:51,164 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:51] "[32mGET /staff/all-orders?_t=1746045700921 HTTP/1.1[0m" 302 -
2025-04-30 23:41:51,179 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:51,182 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:51,185 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:51,189 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:51] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:41:51,348 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:51] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:51,352 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:51] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:51,353 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:51] "GET /service-worker.js?v=1746045711325 HTTP/1.1" 200 -
2025-04-30 23:41:51,387 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:51] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:51,429 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:51] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:55,322 ERROR: Error in all_staff_orders: Could not build url for endpoint 'staff_orders'. Did you mean 'all_staff_orders' instead?
2025-04-30 23:41:55,326 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:55] "[32mGET /staff/all-orders?_t=1746045712471 HTTP/1.1[0m" 302 -
2025-04-30 23:41:55,339 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:55,345 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:55,347 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:55,352 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:55] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:41:55,455 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:55] "GET /service-worker.js?v=1746045715441 HTTP/1.1" 200 -
2025-04-30 23:41:55,469 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:55,481 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:55] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:41:55,518 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:55] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:41:55,519 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:55] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:41:59,196 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:59,212 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:59,218 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:41:59,270 INFO: 127.0.0.1 - - [30/Apr/2025 23:41:59] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:42:05,461 INFO: 127.0.0.1 - - [30/Apr/2025 23:42:05] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:42:15,463 INFO: 127.0.0.1 - - [30/Apr/2025 23:42:15] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:42:26,187 INFO: 127.0.0.1 - - [30/Apr/2025 23:42:26] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:44:18,331 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 23:44:20,172 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:20] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:44:22,124 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:22,130 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:22,136 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:22,181 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:44:22,408 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 23:44:22,418 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 23:44:22,442 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 23:44:22,450 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 23:44:22,455 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-04-30 23:44:22,460 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 23:44:22,500 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 23:44:22,550 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /service-worker.js?v=1746045862513 HTTP/1.1" 200 -
2025-04-30 23:44:22,559 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-04-30 23:44:22,564 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:22,566 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:22,566 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:44:22,631 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:22] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:44:26,019 ERROR: Error in all_staff_orders: Could not build url for endpoint 'staff_orders'. Did you mean 'all_staff_orders' instead?
2025-04-30 23:44:26,021 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:26] "[32mGET /staff/all-orders?_t=1746045863673 HTTP/1.1[0m" 302 -
2025-04-30 23:44:26,035 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:26,038 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:26,043 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:26,048 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:26] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:44:26,144 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:26] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 23:44:26,196 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:26] "GET /service-worker.js?v=1746045866143 HTTP/1.1" 200 -
2025-04-30 23:44:26,197 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:26] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:26,198 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:26] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:44:26,228 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:26] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:26,249 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:26] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:44:31,099 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:31,103 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:31,107 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:31,113 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:31] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:44:31,219 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:31] "GET /service-worker.js?v=1746045871213 HTTP/1.1" 200 -
2025-04-30 23:44:31,262 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:31] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:31,263 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:31] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:44:31,295 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:31] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:31,300 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:31] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:44:33,827 ERROR: Error in all_staff_orders: Could not build url for endpoint 'staff_orders'. Did you mean 'all_staff_orders' instead?
2025-04-30 23:44:33,828 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:33] "[32mGET /staff/all-orders?_t=1746045872358 HTTP/1.1[0m" 302 -
2025-04-30 23:44:33,844 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:33,847 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:33,849 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:33,854 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:33] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:44:33,970 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:33] "GET /service-worker.js?v=1746045873952 HTTP/1.1" 200 -
2025-04-30 23:44:33,978 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:33] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:44:33,982 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:33] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:34,015 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:34] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:34,046 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:34] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:44:39,433 ERROR: Error in all_staff_orders: Could not build url for endpoint 'staff_orders'. Did you mean 'all_staff_orders' instead?
2025-04-30 23:44:39,436 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:39] "[32mGET /staff/all-orders?_t=1746045875082 HTTP/1.1[0m" 302 -
2025-04-30 23:44:39,453 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:39,460 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:39,463 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:44:39,467 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:39] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:44:39,582 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:39] "GET /service-worker.js?v=1746045879564 HTTP/1.1" 200 -
2025-04-30 23:44:39,587 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:39] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:44:39,599 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:39,624 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:44:39,647 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:39] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:44:50,196 INFO: 127.0.0.1 - - [30/Apr/2025 23:44:50] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:18,531 INFO:  * Restarting with stat
2025-04-30 23:52:20,070 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-04-30 23:52:21,579 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:21] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:25,541 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:52:25,546 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:52:25,556 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:52:25,599 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:52:25,832 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-04-30 23:52:25,858 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-04-30 23:52:25,860 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /static/js/app.js HTTP/1.1" 200 -
2025-04-30 23:52:25,881 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /static/js/main.js HTTP/1.1" 200 -
2025-04-30 23:52:25,882 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-04-30 23:52:25,889 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-04-30 23:52:25,911 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 23:52:25,924 INFO: Service worker requested
2025-04-30 23:52:25,932 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /service-worker.js?v=1746046345910 HTTP/1.1" 200 -
2025-04-30 23:52:25,961 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:25,964 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-04-30 23:52:25,974 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:25,980 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:25] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:26,042 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:26] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:52:30,486 ERROR: Error fetching recent orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" ORDER BY "order".order_date DESC
 LIMIT ? OFFSET ?]
[parameters: (20, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:52:30,489 ERROR: Error fetching pending orders: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:52:30,493 ERROR: Error fetching order counts: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT count(*) AS count_1 
FROM (SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".status = ?) AS anon_1]
[parameters: ('pending',)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:52:30,498 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:30] "GET /staff_dashboard HTTP/1.1" 200 -
2025-04-30 23:52:30,575 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:30] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-04-30 23:52:30,622 INFO: Service worker requested
2025-04-30 23:52:30,628 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:30] "GET /service-worker.js?v=1746046350580 HTTP/1.1" 200 -
2025-04-30 23:52:30,639 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:30] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:30,644 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:30] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:30,682 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:30] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:30,693 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:30] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:52:35,229 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:35] "GET /staff/all-orders?_t=1746046351752 HTTP/1.1" 200 -
2025-04-30 23:52:35,410 INFO: Service worker requested
2025-04-30 23:52:35,413 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:35] "GET /service-worker.js?v=1746046355403 HTTP/1.1" 200 -
2025-04-30 23:52:35,444 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:35,481 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:35] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:35,513 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:35] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:52:35,521 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:39,557 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:39] "GET /cart?_t=1746046356584 HTTP/1.1" 200 -
2025-04-30 23:52:39,675 INFO: Service worker requested
2025-04-30 23:52:39,676 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:39] "GET /service-worker.js?v=1746046359662 HTTP/1.1" 200 -
2025-04-30 23:52:39,684 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:39] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:39,707 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:39,729 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:39] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:52:39,737 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:39] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:42,891 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:42] "POST /update_cart/38 HTTP/1.1" 200 -
2025-04-30 23:52:42,914 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:42] "GET /cart?_t=1746046356584 HTTP/1.1" 200 -
2025-04-30 23:52:43,037 INFO: Service worker requested
2025-04-30 23:52:43,045 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:43,052 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:43] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:43,054 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:43] "GET /service-worker.js?v=1746046363021 HTTP/1.1" 200 -
2025-04-30 23:52:43,080 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:43,112 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:43] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:52:44,985 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:44] "GET /?_t=1746046364160 HTTP/1.1" 200 -
2025-04-30 23:52:45,025 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:45] "GET /static/css/style.css?v=5014872b&t=1746046339 HTTP/1.1" 200 -
2025-04-30 23:52:45,121 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:45,125 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:45] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:45,134 INFO: Service worker requested
2025-04-30 23:52:45,139 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:45] "GET /service-worker.js?v=1746046365097 HTTP/1.1" 200 -
2025-04-30 23:52:45,142 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:45,192 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:45] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:52:47,034 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:47] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:52:47,059 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:47] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:52:47,078 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:47] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:49,756 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:52:49,770 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:49] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-04-30 23:52:51,345 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:51] "GET /cart?_t=1746046369774 HTTP/1.1" 200 -
2025-04-30 23:52:51,459 INFO: Service worker requested
2025-04-30 23:52:51,462 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:51] "GET /service-worker.js?v=1746046371443 HTTP/1.1" 200 -
2025-04-30 23:52:51,476 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:51] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:51,511 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:51] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:52:52,913 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:52] "GET /checkout?_t=1746046372591 HTTP/1.1" 200 -
2025-04-30 23:52:53,087 INFO: Service worker requested
2025-04-30 23:52:53,091 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:53] "GET /service-worker.js?v=1746046373083 HTTP/1.1" 200 -
2025-04-30 23:52:53,112 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:53] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:53,115 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:53] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:53,161 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:53] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:53,189 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:53] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:52:56,866 WARNING: SQLAlchemy error when creating order, falling back to direct SQL: (sqlite3.OperationalError) table order has no column named reference_number
[SQL: INSERT INTO "order" (reference_number, customer_id, order_date, total_amount, status, customer_name, customer_phone, customer_email, customer_address, order_type, created_by_id, updated_at, completed_at, viewed, viewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, None, '2025-04-30 20:52:56.862728', 9000.0, 'pending', 'staff1', '0775538145', 'mosesharuna407@gmail.com', 'Sir Apolo Kagwa Road', 'online', None, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:52:56,875 ERROR: Error in get_order_by_id: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".id = ?]
[parameters: (21,)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:52:56,877 WARNING: Created order 21 with direct SQL but can't access it
2025-04-30 23:52:56,878 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:56] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 23:52:56,906 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:56] "GET /cart HTTP/1.1" 200 -
2025-04-30 23:52:57,066 INFO: Service worker requested
2025-04-30 23:52:57,068 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:57] "GET /service-worker.js?v=1746046377028 HTTP/1.1" 200 -
2025-04-30 23:52:57,070 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:57] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:52:57,089 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:57] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:57,123 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:57] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:52:57,133 INFO: 127.0.0.1 - - [30/Apr/2025 23:52:57] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:07,047 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:07] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:53:11,118 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:11] "GET /checkout?_t=1746046378256 HTTP/1.1" 200 -
2025-04-30 23:53:11,213 INFO: Service worker requested
2025-04-30 23:53:11,214 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:11] "GET /service-worker.js?v=1746046391207 HTTP/1.1" 200 -
2025-04-30 23:53:11,251 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:11,253 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:11] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:53:11,297 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:11] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:11,303 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:16,426 WARNING: SQLAlchemy error when creating order, falling back to direct SQL: (sqlite3.OperationalError) table order has no column named reference_number
[SQL: INSERT INTO "order" (reference_number, customer_id, order_date, total_amount, status, customer_name, customer_phone, customer_email, customer_address, order_type, created_by_id, updated_at, completed_at, viewed, viewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, None, '2025-04-30 20:53:16.425912', 9000.0, 'pending', 'staff1', '0775538145', 'mosesharuna407@gmail.com', 'Sir Apolo Kagwa Road', 'online', None, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:53:16,437 ERROR: Error in get_order_by_id: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".id = ?]
[parameters: (22,)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:53:16,438 WARNING: Created order 22 with direct SQL but can't access it
2025-04-30 23:53:16,440 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:16] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 23:53:16,456 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:16] "GET /cart HTTP/1.1" 200 -
2025-04-30 23:53:16,570 INFO: Service worker requested
2025-04-30 23:53:16,571 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:16] "GET /service-worker.js?v=1746046396553 HTTP/1.1" 200 -
2025-04-30 23:53:16,608 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:16] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:16,643 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:16] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:53:16,651 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:16] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:16,653 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:16] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:21,209 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:21] "POST /update_cart/38 HTTP/1.1" 200 -
2025-04-30 23:53:21,228 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:21] "GET /cart HTTP/1.1" 200 -
2025-04-30 23:53:21,384 INFO: Service worker requested
2025-04-30 23:53:21,386 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:21] "GET /service-worker.js?v=1746046401379 HTTP/1.1" 200 -
2025-04-30 23:53:21,404 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:21] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:21,405 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:21] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:53:21,433 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:21] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:21,456 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:21] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:23,042 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:23] "GET /?_t=1746046402490 HTTP/1.1" 200 -
2025-04-30 23:53:23,141 INFO: Service worker requested
2025-04-30 23:53:23,144 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:23] "GET /service-worker.js?v=1746046403137 HTTP/1.1" 200 -
2025-04-30 23:53:23,171 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:23] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:23,176 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:23] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:53:23,201 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:23] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:23,206 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:23] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:30,947 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:30] "[32mGET /logout?_t=1746046404271 HTTP/1.1[0m" 302 -
2025-04-30 23:53:30,965 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:30] "GET / HTTP/1.1" 200 -
2025-04-30 23:53:31,066 INFO: Service worker requested
2025-04-30 23:53:31,067 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:31] "GET /service-worker.js?v=1746046411051 HTTP/1.1" 200 -
2025-04-30 23:53:31,071 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:31] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:31,100 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:31] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:31,131 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:31] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:32,187 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:32] "GET /login?_t=1746046411167 HTTP/1.1" 200 -
2025-04-30 23:53:32,305 INFO: Service worker requested
2025-04-30 23:53:32,306 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:32] "GET /service-worker.js?v=1746046412281 HTTP/1.1" 200 -
2025-04-30 23:53:32,316 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:32] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:32,331 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:32] "GET /?cache_bust=1746046412281 HTTP/1.1" 200 -
2025-04-30 23:53:32,337 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:32] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:32,432 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:32] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:32,471 INFO: Service worker requested
2025-04-30 23:53:32,473 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:32] "GET /service-worker.js?v=1746046412404 HTTP/1.1" 200 -
2025-04-30 23:53:32,517 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:32] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:33,773 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:33] "GET /login?_t=1746046413594 HTTP/1.1" 200 -
2025-04-30 23:53:33,851 INFO: Service worker requested
2025-04-30 23:53:33,853 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:33] "GET /service-worker.js?v=1746046413847 HTTP/1.1" 200 -
2025-04-30 23:53:33,891 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:33] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:33,916 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:33] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:33,923 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:33] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:40,766 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:40] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-30 23:53:40,816 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:40] "GET /admin HTTP/1.1" 200 -
2025-04-30 23:53:41,016 INFO: Service worker requested
2025-04-30 23:53:41,019 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:41] "GET /service-worker.js?v=1746046421010 HTTP/1.1" 200 -
2025-04-30 23:53:41,031 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:41,079 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:41] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:53:41,114 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:41] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:41,115 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:41] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:45,265 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:45] "GET /cart?_t=1746046422176 HTTP/1.1" 200 -
2025-04-30 23:53:45,383 INFO: Service worker requested
2025-04-30 23:53:45,385 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:45] "GET /service-worker.js?v=1746046425371 HTTP/1.1" 200 -
2025-04-30 23:53:45,396 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:45] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:53:45,398 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:45,418 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:53:45,444 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:45] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:53:47,046 INFO: Service worker requested
2025-04-30 23:53:47,047 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:47] "GET /service-worker.js?v=1746046425371 HTTP/1.1" 200 -
2025-04-30 23:53:51,191 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:51] "GET /checkout?_t=1746046425499 HTTP/1.1" 200 -
2025-04-30 23:53:51,298 INFO: Service worker requested
2025-04-30 23:53:51,300 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:51] "GET /service-worker.js?v=1746046431278 HTTP/1.1" 200 -
2025-04-30 23:53:51,305 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:51] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:53:51,356 INFO: 127.0.0.1 - - [30/Apr/2025 23:53:51] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:54:01,294 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:01] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:54:03,114 WARNING: SQLAlchemy error when creating order, falling back to direct SQL: (sqlite3.OperationalError) table order has no column named reference_number
[SQL: INSERT INTO "order" (reference_number, customer_id, order_date, total_amount, status, customer_name, customer_phone, customer_email, customer_address, order_type, created_by_id, updated_at, completed_at, viewed, viewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, None, '2025-04-30 20:54:03.113681', 9000.0, 'pending', 'admin', '0775538145', 'admin@example.com', 'Sir Apolo Kagwa Road', 'online', None, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:54:03,131 ERROR: Error in get_order_by_id: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".id = ?]
[parameters: (23,)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:54:03,133 WARNING: Created order 23 with direct SQL but can't access it
2025-04-30 23:54:03,136 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:03] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 23:54:03,165 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:03] "GET /cart HTTP/1.1" 200 -
2025-04-30 23:54:03,332 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:54:03,345 INFO: Service worker requested
2025-04-30 23:54:03,347 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:03] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:54:03,349 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:03] "GET /service-worker.js?v=1746046443274 HTTP/1.1" 200 -
2025-04-30 23:54:03,361 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:54:03,417 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:03] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:54:06,864 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:06] "GET /checkout?_t=1746046444457 HTTP/1.1" 200 -
2025-04-30 23:54:06,949 INFO: Service worker requested
2025-04-30 23:54:06,951 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:06] "GET /service-worker.js?v=1746046446946 HTTP/1.1" 200 -
2025-04-30 23:54:06,996 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:06] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:54:07,014 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:07] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:54:07,016 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:07] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:54:07,075 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:07] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:54:10,884 WARNING: SQLAlchemy error when creating order, falling back to direct SQL: (sqlite3.OperationalError) table order has no column named reference_number
[SQL: INSERT INTO "order" (reference_number, customer_id, order_date, total_amount, status, customer_name, customer_phone, customer_email, customer_address, order_type, created_by_id, updated_at, completed_at, viewed, viewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, None, '2025-04-30 20:54:10.884156', 9000.0, 'pending', 'admin', '0775538145', 'admin@example.com', 'Sir Apolo Kagwa Road', 'online', None, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:54:10,895 ERROR: Error in get_order_by_id: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".id = ?]
[parameters: (24,)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-04-30 23:54:10,896 WARNING: Created order 24 with direct SQL but can't access it
2025-04-30 23:54:10,897 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:10] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-04-30 23:54:10,915 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:10] "GET /cart HTTP/1.1" 200 -
2025-04-30 23:54:11,073 INFO: Service worker requested
2025-04-30 23:54:11,078 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:11] "GET /service-worker.js?v=1746046451057 HTTP/1.1" 200 -
2025-04-30 23:54:11,082 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:54:11,085 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:11] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:54:11,126 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:11] "GET /get_cart_count HTTP/1.1" 200 -
2025-04-30 23:54:11,153 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:11] "GET /offline.html HTTP/1.1" 200 -
2025-04-30 23:54:21,072 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:21] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:54:23,895 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:23] "GET /cart HTTP/1.1" 200 -
2025-04-30 23:54:31,067 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:31] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:54:41,075 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:41] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-04-30 23:54:51,179 INFO: 127.0.0.1 - - [30/Apr/2025 23:54:51] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:10:58,852 INFO:  * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
2025-05-01 00:11:08,224 INFO: 127.0.0.1 - - [01/May/2025 00:11:08] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:11:16,793 INFO: 127.0.0.1 - - [01/May/2025 00:11:16] "GET /cart HTTP/1.1" 200 -
2025-05-01 00:11:16,901 INFO: 127.0.0.1 - - [01/May/2025 00:11:16] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-05-01 00:11:17,140 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-05-01 00:11:17,146 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-05-01 00:11:17,146 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /static/js/app.js HTTP/1.1" 200 -
2025-05-01 00:11:17,148 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /static/js/main.js HTTP/1.1" 200 -
2025-05-01 00:11:17,154 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /static/js/cart.js HTTP/1.1" 200 -
2025-05-01 00:11:17,165 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-05-01 00:11:17,248 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-05-01 00:11:17,276 INFO: Service worker requested
2025-05-01 00:11:17,290 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:17,291 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /service-worker.js?v=1746047477248 HTTP/1.1" 200 -
2025-05-01 00:11:17,292 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-05-01 00:11:17,294 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:11:17,295 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:17,362 INFO: 127.0.0.1 - - [01/May/2025 00:11:17] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 00:11:21,658 INFO: 127.0.0.1 - - [01/May/2025 00:11:21] "GET /cart HTTP/1.1" 200 -
2025-05-01 00:11:21,761 INFO: 127.0.0.1 - - [01/May/2025 00:11:21] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-05-01 00:11:21,795 INFO: 127.0.0.1 - - [01/May/2025 00:11:21] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:21,796 INFO: 127.0.0.1 - - [01/May/2025 00:11:21] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:11:21,808 INFO: Service worker requested
2025-05-01 00:11:21,811 INFO: 127.0.0.1 - - [01/May/2025 00:11:21] "GET /service-worker.js?v=1746047481776 HTTP/1.1" 200 -
2025-05-01 00:11:21,816 INFO: 127.0.0.1 - - [01/May/2025 00:11:21] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:21,853 INFO: 127.0.0.1 - - [01/May/2025 00:11:21] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 00:11:24,276 INFO: 127.0.0.1 - - [01/May/2025 00:11:24] "GET /checkout?_t=1746047482903 HTTP/1.1" 200 -
2025-05-01 00:11:24,379 INFO: Service worker requested
2025-05-01 00:11:24,381 INFO: 127.0.0.1 - - [01/May/2025 00:11:24] "GET /service-worker.js?v=1746047484370 HTTP/1.1" 200 -
2025-05-01 00:11:24,395 INFO: 127.0.0.1 - - [01/May/2025 00:11:24] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:24,416 INFO: 127.0.0.1 - - [01/May/2025 00:11:24] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:11:24,439 INFO: 127.0.0.1 - - [01/May/2025 00:11:24] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 00:11:24,445 INFO: 127.0.0.1 - - [01/May/2025 00:11:24] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:27,927 WARNING: SQLAlchemy error when creating order, falling back to direct SQL: (sqlite3.OperationalError) table order has no column named reference_number
[SQL: INSERT INTO "order" (reference_number, customer_id, order_date, total_amount, status, customer_name, customer_phone, customer_email, customer_address, order_type, created_by_id, updated_at, completed_at, viewed, viewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, None, '2025-04-30 21:11:27.927194', 9000.0, 'pending', 'admin', '0775538145', 'admin@example.com', 'Sir Apolo Kagwa Road', 'online', None, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-05-01 00:11:27,940 ERROR: Error in get_order_by_id: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".id = ?]
[parameters: (25,)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-05-01 00:11:27,941 WARNING: Created order 25 with direct SQL but can't access it
2025-05-01 00:11:27,943 INFO: 127.0.0.1 - - [01/May/2025 00:11:27] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-05-01 00:11:27,958 INFO: 127.0.0.1 - - [01/May/2025 00:11:27] "GET /cart HTTP/1.1" 200 -
2025-05-01 00:11:28,180 INFO: Service worker requested
2025-05-01 00:11:28,189 INFO: 127.0.0.1 - - [01/May/2025 00:11:28] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:28,190 INFO: 127.0.0.1 - - [01/May/2025 00:11:28] "GET /service-worker.js?v=1746047488170 HTTP/1.1" 200 -
2025-05-01 00:11:28,194 INFO: 127.0.0.1 - - [01/May/2025 00:11:28] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:11:28,224 INFO: 127.0.0.1 - - [01/May/2025 00:11:28] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:28,255 INFO: 127.0.0.1 - - [01/May/2025 00:11:28] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 00:11:38,187 INFO: 127.0.0.1 - - [01/May/2025 00:11:38] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:11:48,613 INFO: 127.0.0.1 - - [01/May/2025 00:11:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:11:48,624 INFO: 127.0.0.1 - - [01/May/2025 00:11:48] "POST /update_cart/28 HTTP/1.1" 200 -
2025-05-01 00:11:48,646 INFO: 127.0.0.1 - - [01/May/2025 00:11:48] "GET /cart HTTP/1.1" 200 -
2025-05-01 00:11:48,758 INFO: Service worker requested
2025-05-01 00:11:48,760 INFO: 127.0.0.1 - - [01/May/2025 00:11:48] "GET /service-worker.js?v=1746047508754 HTTP/1.1" 200 -
2025-05-01 00:11:48,773 INFO: 127.0.0.1 - - [01/May/2025 00:11:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:11:48,787 INFO: 127.0.0.1 - - [01/May/2025 00:11:48] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:48,812 INFO: 127.0.0.1 - - [01/May/2025 00:11:48] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:48,813 INFO: 127.0.0.1 - - [01/May/2025 00:11:48] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 00:11:51,502 INFO: 127.0.0.1 - - [01/May/2025 00:11:51] "POST /update_cart/27 HTTP/1.1" 200 -
2025-05-01 00:11:51,524 INFO: 127.0.0.1 - - [01/May/2025 00:11:51] "GET /cart HTTP/1.1" 200 -
2025-05-01 00:11:51,609 INFO: Service worker requested
2025-05-01 00:11:51,611 INFO: 127.0.0.1 - - [01/May/2025 00:11:51] "GET /service-worker.js?v=1746047511604 HTTP/1.1" 200 -
2025-05-01 00:11:51,629 INFO: 127.0.0.1 - - [01/May/2025 00:11:51] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 00:11:51,643 INFO: 127.0.0.1 - - [01/May/2025 00:11:51] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 00:11:51,681 INFO: 127.0.0.1 - - [01/May/2025 00:11:51] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 00:11:51,686 INFO: 127.0.0.1 - - [01/May/2025 00:11:51] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:26,840 INFO:  * Restarting with stat
2025-05-01 01:09:28,141 WARNING:  * Debugger is active!
2025-05-01 01:09:28,147 INFO:  * Debugger PIN: 597-544-663
2025-05-01 01:09:29,963 WARNING:  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-01 01:09:29,965 INFO:  * Running on http://192.168.219.218:5000/ (Press CTRL+C to quit)
2025-05-01 01:09:34,506 INFO: 127.0.0.1 - - [01/May/2025 01:09:34] "GET /reports?_t=1746047512728 HTTP/1.1" 200 -
2025-05-01 01:09:34,767 INFO: 127.0.0.1 - - [01/May/2025 01:09:34] "GET /static/css/style.css?v=&t= HTTP/1.1" 200 -
2025-05-01 01:09:34,789 INFO: 127.0.0.1 - - [01/May/2025 01:09:34] "GET /static/js/manifest-fix.js HTTP/1.1" 200 -
2025-05-01 01:09:34,804 INFO: 127.0.0.1 - - [01/May/2025 01:09:34] "GET /static/js/order-notification.js HTTP/1.1" 200 -
2025-05-01 01:09:34,832 INFO: 127.0.0.1 - - [01/May/2025 01:09:34] "GET /static/js/app.js HTTP/1.1" 200 -
2025-05-01 01:09:34,852 INFO: 127.0.0.1 - - [01/May/2025 01:09:34] "GET /static/js/main.js HTTP/1.1" 200 -
2025-05-01 01:09:34,852 INFO: 127.0.0.1 - - [01/May/2025 01:09:34] "GET /static/js/service-worker-update.js HTTP/1.1" 200 -
2025-05-01 01:09:35,006 INFO: 127.0.0.1 - - [01/May/2025 01:09:35] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-05-01 01:09:35,058 INFO: Service worker requested
2025-05-01 01:09:35,081 INFO: 127.0.0.1 - - [01/May/2025 01:09:35] "GET /service-worker.js?v=1746050975048 HTTP/1.1" 200 -
2025-05-01 01:09:35,083 INFO: 127.0.0.1 - - [01/May/2025 01:09:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:35,093 INFO: 127.0.0.1 - - [01/May/2025 01:09:35] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 01:09:35,100 INFO: 127.0.0.1 - - [01/May/2025 01:09:35] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:35,103 INFO: 127.0.0.1 - - [01/May/2025 01:09:35] "[35m[1mGET /static/sounds/order-alarm.mp3 HTTP/1.1[0m" 206 -
2025-05-01 01:09:35,224 INFO: 127.0.0.1 - - [01/May/2025 01:09:35] "GET /api/sales/daily?start_date=2025-03-31&end_date=2025-04-30 HTTP/1.1" 200 -
2025-05-01 01:09:35,283 INFO: 127.0.0.1 - - [01/May/2025 01:09:35] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 01:09:43,481 INFO: 127.0.0.1 - - [01/May/2025 01:09:43] "GET /cart?_t=1746050975343 HTTP/1.1" 200 -
2025-05-01 01:09:43,595 INFO: 127.0.0.1 - - [01/May/2025 01:09:43] "GET /static/sounds/order-alarm.mp3 HTTP/1.1" 200 -
2025-05-01 01:09:43,636 INFO: Service worker requested
2025-05-01 01:09:43,640 INFO: 127.0.0.1 - - [01/May/2025 01:09:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:43,642 INFO: 127.0.0.1 - - [01/May/2025 01:09:43] "GET /service-worker.js?v=1746050983599 HTTP/1.1" 200 -
2025-05-01 01:09:43,649 INFO: 127.0.0.1 - - [01/May/2025 01:09:43] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 01:09:43,671 INFO: 127.0.0.1 - - [01/May/2025 01:09:43] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:43,696 INFO: 127.0.0.1 - - [01/May/2025 01:09:43] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 01:09:44,875 INFO: 127.0.0.1 - - [01/May/2025 01:09:44] "GET /?_t=1746050984762 HTTP/1.1" 200 -
2025-05-01 01:09:44,916 INFO: 127.0.0.1 - - [01/May/2025 01:09:44] "GET /static/css/style.css?v=f2ec6e98&t=1746050968 HTTP/1.1" 200 -
2025-05-01 01:09:45,005 INFO: Service worker requested
2025-05-01 01:09:45,017 INFO: 127.0.0.1 - - [01/May/2025 01:09:45] "GET /service-worker.js?v=1746050984989 HTTP/1.1" 200 -
2025-05-01 01:09:45,019 INFO: 127.0.0.1 - - [01/May/2025 01:09:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:45,020 INFO: 127.0.0.1 - - [01/May/2025 01:09:45] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 01:09:45,044 INFO: 127.0.0.1 - - [01/May/2025 01:09:45] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:45,070 INFO: 127.0.0.1 - - [01/May/2025 01:09:45] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 01:09:46,819 INFO: 127.0.0.1 - - [01/May/2025 01:09:46] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-05-01 01:09:46,839 INFO: 127.0.0.1 - - [01/May/2025 01:09:46] "POST /add_to_cart/1 HTTP/1.1" 200 -
2025-05-01 01:09:46,841 INFO: 127.0.0.1 - - [01/May/2025 01:09:46] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:48,295 INFO: 127.0.0.1 - - [01/May/2025 01:09:48] "GET /cart?_t=1746050986852 HTTP/1.1" 200 -
2025-05-01 01:09:48,416 INFO: Service worker requested
2025-05-01 01:09:48,419 INFO: 127.0.0.1 - - [01/May/2025 01:09:48] "GET /service-worker.js?v=1746050988400 HTTP/1.1" 200 -
2025-05-01 01:09:48,434 INFO: 127.0.0.1 - - [01/May/2025 01:09:48] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 01:09:48,466 INFO: 127.0.0.1 - - [01/May/2025 01:09:48] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 01:09:53,175 INFO: 127.0.0.1 - - [01/May/2025 01:09:53] "GET /checkout?_t=1746050989540 HTTP/1.1" 200 -
2025-05-01 01:09:53,334 INFO: Service worker requested
2025-05-01 01:09:53,337 INFO: 127.0.0.1 - - [01/May/2025 01:09:53] "GET /service-worker.js?v=1746050993328 HTTP/1.1" 200 -
2025-05-01 01:09:53,351 INFO: 127.0.0.1 - - [01/May/2025 01:09:53] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 01:09:53,356 INFO: 127.0.0.1 - - [01/May/2025 01:09:53] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:53,382 INFO: 127.0.0.1 - - [01/May/2025 01:09:53] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:53,416 INFO: 127.0.0.1 - - [01/May/2025 01:09:53] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 01:09:57,091 WARNING: SQLAlchemy error when creating order, falling back to direct SQL: (sqlite3.OperationalError) table order has no column named reference_number
[SQL: INSERT INTO "order" (reference_number, customer_id, order_date, total_amount, status, customer_name, customer_phone, customer_email, customer_address, order_type, created_by_id, updated_at, completed_at, viewed, viewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, None, '2025-04-30 22:09:57.090524', 6000.0, 'pending', 'admin', '0775538145', 'admin@example.com', 'Sir Apolo Kagwa Road', 'online', None, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-05-01 01:09:57,106 ERROR: Error in get_order_by_id: (sqlite3.OperationalError) no such column: order.reference_number
[SQL: SELECT "order".id AS order_id, "order".reference_number AS order_reference_number, "order".customer_id AS order_customer_id, "order".order_date AS order_order_date, "order".total_amount AS order_total_amount, "order".status AS order_status, "order".customer_name AS order_customer_name, "order".customer_phone AS order_customer_phone, "order".customer_email AS order_customer_email, "order".customer_address AS order_customer_address, "order".order_type AS order_order_type, "order".created_by_id AS order_created_by_id, "order".updated_at AS order_updated_at, "order".completed_at AS order_completed_at, "order".viewed AS order_viewed, "order".viewed_at AS order_viewed_at 
FROM "order" 
WHERE "order".id = ?]
[parameters: (26,)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-05-01 01:09:57,107 WARNING: Created order 26 with direct SQL but can't access it
2025-05-01 01:09:57,108 INFO: 127.0.0.1 - - [01/May/2025 01:09:57] "[32mPOST /checkout HTTP/1.1[0m" 302 -
2025-05-01 01:09:57,137 INFO: 127.0.0.1 - - [01/May/2025 01:09:57] "GET /cart HTTP/1.1" 200 -
2025-05-01 01:09:57,303 INFO: Service worker requested
2025-05-01 01:09:57,307 INFO: 127.0.0.1 - - [01/May/2025 01:09:57] "GET /service-worker.js?v=1746050997270 HTTP/1.1" 200 -
2025-05-01 01:09:57,324 INFO: 127.0.0.1 - - [01/May/2025 01:09:57] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:57,346 INFO: 127.0.0.1 - - [01/May/2025 01:09:57] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 01:09:57,365 INFO: 127.0.0.1 - - [01/May/2025 01:09:57] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:09:57,372 INFO: 127.0.0.1 - - [01/May/2025 01:09:57] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 01:10:03,421 INFO: 127.0.0.1 - - [01/May/2025 01:10:03] "GET /admin?_t=1746051001823 HTTP/1.1" 200 -
2025-05-01 01:10:03,585 INFO: Service worker requested
2025-05-01 01:10:03,587 INFO: 127.0.0.1 - - [01/May/2025 01:10:03] "GET /service-worker.js?v=1746051003582 HTTP/1.1" 200 -
2025-05-01 01:10:03,603 INFO: 127.0.0.1 - - [01/May/2025 01:10:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:10:03,633 INFO: 127.0.0.1 - - [01/May/2025 01:10:03] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 01:10:03,651 INFO: 127.0.0.1 - - [01/May/2025 01:10:03] "GET /offline.html HTTP/1.1" 200 -
2025-05-01 01:10:03,655 INFO: 127.0.0.1 - - [01/May/2025 01:10:03] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:10:11,830 INFO: 127.0.0.1 - - [01/May/2025 01:10:11] "[32mGET /login?next=%2Fstaff%2Forders HTTP/1.1[0m" 302 -
2025-05-01 01:10:11,860 INFO: 127.0.0.1 - - [01/May/2025 01:10:11] "GET /admin HTTP/1.1" 200 -
2025-05-01 01:10:12,158 INFO: Service worker requested
2025-05-01 01:10:12,161 INFO: 127.0.0.1 - - [01/May/2025 01:10:12] "GET /service-worker.js?v=1746051012150 HTTP/1.1" 200 -
2025-05-01 01:10:12,169 INFO: 127.0.0.1 - - [01/May/2025 01:10:12] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:10:12,212 INFO: 127.0.0.1 - - [01/May/2025 01:10:12] "GET /api/check_new_orders HTTP/1.1" 200 -
2025-05-01 01:10:12,218 INFO: 127.0.0.1 - - [01/May/2025 01:10:12] "GET /get_cart_count HTTP/1.1" 200 -
2025-05-01 01:10:12,262 INFO: 127.0.0.1 - - [01/May/2025 01:10:12] "GET /offline.html HTTP/1.1" 200 -
